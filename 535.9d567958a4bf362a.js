"use strict";(self.webpackChunkfact_front=self.webpackChunkfact_front||[]).push([[535],{1908:(x,M,r)=>{r.d(M,{Z:()=>L});const C={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let v;const s=new Uint8Array(16);function h(){if(!v&&(v=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!v))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return v(s)}const t=[];for(let n=0;n<256;++n)t.push((n+256).toString(16).slice(1));const L=function H(n,f,c){if(C.randomUUID&&!f&&!n)return C.randomUUID();const d=(n=n||{}).random||(n.rng||h)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,f){c=c||0;for(let b=0;b<16;++b)f[c+b]=d[b];return f}return function p(n,f=0){return(t[n[f+0]]+t[n[f+1]]+t[n[f+2]]+t[n[f+3]]+"-"+t[n[f+4]]+t[n[f+5]]+"-"+t[n[f+6]]+t[n[f+7]]+"-"+t[n[f+8]]+t[n[f+9]]+"-"+t[n[f+10]]+t[n[f+11]]+t[n[f+12]]+t[n[f+13]]+t[n[f+14]]+t[n[f+15]]).toLowerCase()}(d)}},8448:(x,M,r)=>{r.d(M,{m:()=>H9});var l=r(3226),C=r(4288),v=r(8513),s=r(6733),h=r(4039),t=r(1749),p=r(3690),g=r(1217),u=r(163),H=r(2997),L=r(1464),n=r(5275),f=r(2845),c=r(755),d=r(997);function b(e,i){if(1&e){const a=c.EpF();c.TgZ(0,"tr")(1,"td")(2,"span"),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"span"),c._uU(6),c.qZA()(),c.TgZ(7,"td")(8,"span"),c._uU(9),c.qZA()(),c.TgZ(10,"td")(11,"div",5)(12,"fa-icon",6),c.NdJ("click",function(){const z=c.CHM(a).$implicit,Z=c.oxw(2);return c.KtG(Z.removeIndex.emit(null==z?null:z.index))}),c.qZA()()()()}if(2&e){const a=i.$implicit,o=c.oxw(2);c.xp6(3),c.Oqu(null==a?null:a.index),c.xp6(3),c.Oqu(null==a?null:a.type),c.xp6(3),c.Oqu(null==a?null:a.code),c.xp6(3),c.Q6J("icon",o.faTrashCan)}}function s1(e,i){if(1&e&&(c.TgZ(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3),c._uU(5),c.ALo(6,"titlecase"),c.ALo(7,"translate"),c.qZA(),c.TgZ(8,"th",3),c._uU(9),c.ALo(10,"titlecase"),c.ALo(11,"translate"),c.qZA(),c.TgZ(12,"th",3),c._uU(13),c.ALo(14,"titlecase"),c.ALo(15,"translate"),c.qZA(),c._UZ(16,"th",3),c.qZA()(),c.TgZ(17,"tbody"),c.YNc(18,b,13,4,"tr",4),c.qZA()()()),2&e){const a=c.oxw();c.xp6(5),c.Oqu(c.lcZ(6,4,c.lcZ(7,6,"\xedndice"))),c.xp6(4),c.Oqu(c.lcZ(10,8,c.lcZ(11,10,"tipo"))),c.xp6(4),c.Oqu(c.lcZ(14,12,c.lcZ(15,14,"c\xf3digo"))),c.xp6(5),c.Q6J("ngForOf",a.codes)}}let v1=(()=>{class e{constructor(){this.faTrashCan=d.Vui,this.codes=[],this.removeIndex=new c.vpe}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-product-code-table"]],inputs:{codes:"codes"},outputs:{removeIndex:"removeIndex"},standalone:!0,features:[c.jDz],decls:1,vars:1,consts:[["class","d-flex flex-column gap-3",4,"ngIf"],[1,"d-flex","flex-column","gap-3"],[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"icons-table-container"],[3,"icon","click"]],template:function(a,o){1&a&&c.YNc(0,s1,19,16,"div",0),2&a&&c.Q6J("ngIf",null==o.codes?null:o.codes.length)},dependencies:[h.aw,h.X$,s.rS,s.sg,v.uH,v.BN,s.ez,s.O5],changeDetection:0}),e})();var R={prefix:"fab",iconName:"product-hunt",icon:[512,512,[],"f288","M326.3 218.8c0 20.5-16.7 37.2-37.2 37.2h-70.3v-74.4h70.3c20.5 0 37.2 16.7 37.2 37.2zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-128.1-37.2c0-47.9-38.9-86.8-86.8-86.8H169.2v248h49.6v-74.4h70.3c47.9 0 86.8-38.9 86.8-86.8z"]},S=r(2295),A=r(5893);const j0=function(e){return{active:e}};function Y0(e,i){if(1&e){const a=c.EpF();c.TgZ(0,"tr",14),c.NdJ("click",function(){const z=c.CHM(a).$implicit,Z=c.oxw(2);return c.KtG(Z.select(z))}),c.TgZ(1,"td")(2,"span"),c._uU(3),c.qZA()(),c.TgZ(4,"td")(5,"span"),c._uU(6),c.qZA()(),c.TgZ(7,"td")(8,"span"),c._uU(9),c.qZA()()()}if(2&e){const a=i.$implicit,o=c.oxw(2);c.Q6J("ngClass",c.VKq(4,j0,o.isActive(a))),c.xp6(3),c.Oqu(null==a?null:a.codigo),c.xp6(3),c.Oqu(null==a?null:a.descripcion),c.xp6(3),c.Oqu(null==a?null:a.impuesto)}}function Q0(e,i){if(1&e&&(c.TgZ(0,"table",11)(1,"thead")(2,"tr")(3,"th",12),c._uU(4),c.ALo(5,"titlecase"),c.ALo(6,"translate"),c.qZA(),c.TgZ(7,"th",12),c._uU(8),c.ALo(9,"titlecase"),c.ALo(10,"translate"),c.qZA(),c.TgZ(11,"th",12),c._uU(12),c.ALo(13,"titlecase"),c.ALo(14,"translate"),c.qZA()()(),c.TgZ(15,"tbody"),c.YNc(16,Y0,10,6,"tr",13),c.qZA()()),2&e){const a=c.oxw();c.xp6(4),c.Oqu(c.lcZ(5,4,c.lcZ(6,6,"c\xf3digo"))),c.xp6(4),c.Oqu(c.lcZ(9,8,c.lcZ(10,10,"producto"))),c.xp6(4),c.Oqu(c.lcZ(13,12,c.lcZ(14,14,"impuesto"))),c.xp6(4),c.Q6J("ngForOf",a.searchProducts)}}function K0(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,"No se ha encontrado ning\xfan producto con el c\xf3digo proporcionado"),". "))}let X0=(()=>{class e{constructor(a){this.activeModal=a,this.faProductHunt=R,this.searchProducts=[],this.form=new l.nJ({product:new l.p4({value:null,disabled:!1})})}set products(a){a?.length&&(this.searchProducts=a)}close(){this.activeModal.close(this.form.get("product").value)}select(a){this.form.get("product").setValue(a)}isActive(a){return a?.codigo===this.form.get("product").value?.codigo&&a?.descripcion===this.form.get("product").value?.descripcion&&a?.impuesto===this.form.get("product").value?.impuesto&&a?.categorias?.length===this.form.get("product").value?.categorias?.length}}return e.\u0275fac=function(a){return new(a||e)(c.Y36(S.Kz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-select-product-modal"]],inputs:{products:"products"},standalone:!0,features:[c.jDz],decls:20,vars:20,consts:[[1,"modal-header"],[1,"modal-title","d-flex","align-items-center"],[1,"me-2",3,"icon"],[1,"component-title"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body","d-flex","flex-column","justify-content-start","p-3",3,"formGroup"],["class","table table-striped",4,"ngIf"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[1,"table","table-striped"],["scope","col"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"]],template:function(a,o){1&a&&(c.TgZ(0,"div",0)(1,"h5",1),c._UZ(2,"fa-icon",2),c.TgZ(3,"span",3),c._uU(4),c.ALo(5,"capitalize"),c.ALo(6,"translate"),c.qZA()(),c.TgZ(7,"button",4),c.NdJ("click",function(){return o.activeModal.close("close")}),c.qZA()(),c.TgZ(8,"div",5),c.YNc(9,Q0,17,16,"table",6),c.YNc(10,K0,3,3,"span",7),c.qZA(),c.TgZ(11,"div",8)(12,"button",9),c.NdJ("click",function(){return o.activeModal.close("close")}),c._uU(13),c.ALo(14,"capitalize"),c.ALo(15,"translate"),c.qZA(),c.TgZ(16,"button",10),c.NdJ("click",function(){return o.close()}),c._uU(17),c.ALo(18,"capitalize"),c.ALo(19,"translate"),c.qZA()()),2&a&&(c.xp6(2),c.Q6J("icon",o.faProductHunt),c.xp6(2),c.Oqu(c.lcZ(5,8,c.lcZ(6,10,"seleccionar producto"))),c.xp6(4),c.Q6J("formGroup",o.form),c.xp6(1),c.Q6J("ngIf",null==o.searchProducts?null:o.searchProducts.length),c.xp6(1),c.Q6J("ngIf",!(null!=o.searchProducts&&o.searchProducts.length)),c.xp6(3),c.hij(" ",c.lcZ(14,12,c.lcZ(15,14,"cerrar"))," "),c.xp6(3),c.Q6J("disabled",o.form.invalid),c.xp6(1),c.hij(" ",c.lcZ(18,16,c.lcZ(19,18,"guardar"))," "))},dependencies:[v.uH,v.BN,h.aw,h.X$,H.P,A.e,l.UX,l.JL,l.sg,s.rS,s.sg,s.mk,s.O5],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}tr[_ngcontent-%COMP%]{cursor:pointer}tr.active[_ngcontent-%COMP%]{background-color:#10b4e9;color:#fff}"],changeDetection:0}),e})();var t1=r(1056),m1=r(3472);function $0(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"para realizar la b\xfasqueda debe introducir un c\xf3digo de producto")),". "))}function c9(e,i){if(1&e&&(c.TgZ(0,"div",7),c.YNc(1,$0,4,5,"span",8),c.qZA()),2&e){const a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.productSearchForm.controls.code.hasError("pattern")||a.productSearchForm.controls.code.hasError("required"))}}function a9(e,i){if(1&e){const a=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(a);const m=c.oxw();return c.KtG(m.searchProduct())}),c._UZ(1,"fa-icon",10),c.qZA()}if(2&e){const a=c.oxw();c.Q6J("disabled",a.productSearchForm.invalid),c.xp6(1),c.Q6J("icon",a.faSearch)}}const e9=function(e,i){return{"is-invalid":e,"is-valid":i}};let o9=(()=>{class e extends p.u{constructor(a,o,m){super(),this._haciendaService=a,this._toastService=o,this._modalService=m,this.faSearch=C.wn1,this.productSearchForm=new l.nJ({code:new l.p4({value:null,disabled:!1},[l.kI.required,l.kI.pattern(f.y3)])}),this.showSearch=!0,this.clearAfterFounded=!0,this.productChanged=new c.vpe}searchProduct(){this._haciendaService.getProductInfoByCode(this.productSearchForm.get("code").value).pipe((0,t.R)(this.observableDestroy$)).subscribe({next:a=>{this._modalRef=this._modalService.open(X0,{size:"md",backdrop:"static"}),this._modalRef.componentInstance.products=a,this._modalRef.result.then(o=>{o?.codigo&&(this.productChanged.emit(o),this.clearAfterFounded&&this.productSearchForm.reset())},o=>{console.log(o)})},error:()=>{this._toastService.showToast("No se ha encontrado ning\xfan producto con el c\xf3digo proporcionado.",m1.p.DANGER)}})}}return e.\u0275fac=function(a){return new(a||e)(c.Y36(t1.r),c.Y36(m1.k),c.Y36(S.FF))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-product-search"]],inputs:{showSearch:"showSearch",clearAfterFounded:"clearAfterFounded"},outputs:{productChanged:"productChanged"},standalone:!0,features:[c._Bn([t1.r]),c.qOj,c.jDz],decls:9,vars:11,consts:[[1,"d-flex","flex-column","form-group","w-100",3,"formGroup"],[1,"control-label","mb-2"],[1,"d-flex","justify-content-start","align-items-start","gap-1","w-100"],[1,"w-100"],["type","text","formControlName","code",1,"form-control",3,"readonly","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[3,"icon"]],template:function(a,o){1&a&&(c.TgZ(0,"div",0)(1,"label",1),c._uU(2),c.ALo(3,"translate"),c.qZA(),c.TgZ(4,"div",2)(5,"div",3),c._UZ(6,"input",4),c.YNc(7,c9,2,1,"div",5),c.qZA(),c.YNc(8,a9,2,2,"button",6),c.qZA()()),2&a&&(c.Q6J("formGroup",o.productSearchForm),c.xp6(2),c.hij(" ",c.lcZ(3,6,"C\xf3digo CABYS"),": "),c.xp6(4),c.Q6J("readonly",!o.showSearch)("ngClass",c.WLB(8,e9,o.productSearchForm.controls.code.touched&&o.productSearchForm.controls.code.errors&&o.showSearch,o.productSearchForm.controls.code.valid)),c.xp6(1),c.Q6J("ngIf",o.productSearchForm.controls.code.touched&&o.productSearchForm.controls.code.errors&&o.showSearch),c.xp6(1),c.Q6J("ngIf",o.showSearch))},dependencies:[h.aw,h.X$,H.P,A.e,v.uH,v.BN,l.UX,l.Fj,l.JJ,l.JL,l.sg,l.u,s.mk,s.O5],changeDetection:0}),e})(),l9=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({}),e})(),i9=(()=>{class e{transform(a){return a?n.qL.filter(o=>!a.some(m=>m.type===o.value)):n.qL}}return e.\u0275fac=function(a){return new(a||e)},e.\u0275pipe=c.Yjl({name:"filterProductCode",type:e,pure:!0}),e})();function n9(e,i){1&e&&(c.TgZ(0,"span",30),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"a\xf1adir producto"))," "))}function r9(e,i){1&e&&(c.TgZ(0,"span",30),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"editar producto"))," "))}function f9(e,i){1&e&&(c.TgZ(0,"span",30),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"ver producto"))," "))}function t9(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"el nombre es requerido"))," "))}function m9(e,i){if(1&e&&(c.TgZ(0,"div",31),c.YNc(1,t9,4,5,"span",32),c.qZA()),2&e){const a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.form.controls.name.hasError("required"))}}function s9(e,i){if(1&e&&(c.TgZ(0,"option",33),c._uU(1),c.ALo(2,"capitalize"),c.qZA()),2&e){const a=i.$implicit;c.Q6J("ngValue",null==a?null:a.uuid),c.xp6(1),c.hij(" ",c.lcZ(2,2,null==a?null:a.name)," ")}}function v9(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"el negocio es requerido"))," "))}function h9(e,i){if(1&e&&(c.TgZ(0,"div",31),c.YNc(1,v9,4,5,"span",32),c.qZA()),2&e){const a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.form.controls.business.hasError("required"))}}function z9(e,i){if(1&e&&(c.TgZ(0,"option",34),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e){const a=i.$implicit;c.Q6J("value",null==a?null:a.value),c.xp6(1),c.hij(" ",c.lcZ(2,2,c.lcZ(3,4,null==a?null:a.text))," ")}}function C9(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"el c\xf3digo es requerido"))," "))}function p9(e,i){if(1&e&&(c.TgZ(0,"div",31),c.YNc(1,C9,4,5,"span",32),c.qZA()),2&e){const a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.businessForm.controls.type.hasError("required"))}}function d9(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"el c\xf3digo es requerido"))," "))}function M9(e,i){1&e&&(c.TgZ(0,"span"),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()),2&e&&(c.xp6(1),c.hij(" ",c.lcZ(2,1,c.lcZ(3,3,"el formato del c\xf3digo es incorrecto"))," "))}function b9(e,i){if(1&e&&(c.TgZ(0,"div",31),c.YNc(1,d9,4,5,"span",32),c.YNc(2,M9,4,5,"span",32),c.qZA()),2&e){const a=c.oxw();c.xp6(1),c.Q6J("ngIf",a.businessForm.controls.code.hasError("required")),c.xp6(1),c.Q6J("ngIf",a.businessForm.controls.code.hasError("pattern"))}}function u9(e,i){if(1&e){const a=c.EpF();c.TgZ(0,"button",35),c.NdJ("click",function(){c.CHM(a);const m=c.oxw();return c.KtG(m.save())}),c._uU(1),c.ALo(2,"capitalize"),c.ALo(3,"translate"),c.qZA()}if(2&e){const a=c.oxw();c.Q6J("disabled",a.form.invalid),c.xp6(1),c.hij(" ",c.lcZ(2,2,c.lcZ(3,4,"guardar"))," ")}}const V=function(e,i){return{"is-invalid":e,"is-valid":i}};let H9=(()=>{class e extends p.u{constructor(a,o,m,z){super(),this._productService=a,this._businessService=o,this._cdRef=m,this.activeModal=z,this.cabysAdded=!1,this.businesses=[],this.codes=[],this.faBellConcierge=C.rGq,this.faPlus=C.r8p,this.mode=u.t.CREATE,this.viewModalMode=u.t,this.form=new l.nJ({uuid:new l.p4({value:null,disabled:!1}),description:new l.p4({value:null,disabled:!0}),taxes:new l.p4({value:null,disabled:!0}),name:new l.p4({value:null,disabled:!0},[l.kI.required]),business:new l.p4({value:null,disabled:!0},[l.kI.required])}),this.businessForm=new l.nJ({type:new l.p4({value:null,disabled:!0},[l.kI.required]),code:new l.p4({value:null,disabled:!0},[l.kI.required,l.kI.pattern(f.y3)])})}set viewMode(a){this.mode=a??u.t.VIEW,a===u.t.VIEW&&this.form.disable()}set element(a){this._productService.get(a?.uuid).pipe((0,t.R)(this.observableDestroy$)).subscribe({next:o=>{console.log(o),this.form.patchValue({uuid:o?.uuid,name:o?.name,description:o?.description})}})}getAllBusiness(){this._businessService.getElements({limit:1e3}).pipe((0,t.R)(this.observableDestroy$)).subscribe({next:a=>{this.businesses=a?.results,this.businesses.length&&this.form.get("business").setValue(this.businesses[0]?.uuid),this._cdRef.detectChanges()}})}getCodeIndex(){return this.codes.reduce((a,o)=>a>o.index?a:o.index,0)}save(){const a={uuid:this.form.value?.uuid,name:this.form.value?.name,business:this.form.value?.business,codes:this.codes.map(o=>({code:o.code,type:o.type})),description:this.form.value?.description,taxes:[{cabys_tax_id:this.form.value?.taxes?.cabys_tax_id,code:this.form.value?.taxes?.code}]};this.activeModal.close(a)}addCode(){this.codes=this.codes.concat({...this.businessForm.value,index:this.getCodeIndex()+1}),this.businessForm.patchValue({type:n.qL.find(a=>!this.codes.some(o=>o.type===a.value))?.value??null,code:null}),this._cdRef.detectChanges()}getProduct(a){this.cabysAdded=!0,this.codes=this.codes.concat({index:this.getCodeIndex()+1,code:a?.codigo,type:n.GW.CABYS}),this.form.patchValue({description:a?.descripcion,taxes:{cabys_tax_id:a?.impuesto,code:n.GW.CABYS,amount:a?.impuesto}}),this.businessForm.patchValue({type:n.GW.PROD_PROVEEDOR,code:null}),this.form.enable(),this.businessForm.enable(),this._cdRef.detectChanges()}removeCode(a){this.codes=this.codes.filter(o=>(o.index===a&&o?.type===n.GW.CABYS&&(this.form.reset(),this.form.disable(),this.businessForm.reset(),this.businessForm.disable(),this.cabysAdded=!1),o.index!==a)),this._cdRef.detectChanges()}ngOnInit(){this.getAllBusiness()}}return e.\u0275fac=function(a){return new(a||e)(c.Y36(g.M),c.Y36(L.m),c.Y36(c.sBO),c.Y36(S.Kz))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-product-modal"]],inputs:{viewMode:"viewMode",element:"element"},standalone:!0,features:[c._Bn([g.M,L.m]),c.qOj,c.jDz],decls:65,vars:73,consts:[[1,"modal-header"],[1,"modal-title","d-flex","align-items-center"],[1,"me-2",3,"icon"],["class","component-title",4,"ngIf"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body","d-flex","flex-column","justify-content-start","gap-3","p-3",3,"formGroup"],[1,"w-50",3,"showSearch","clearAfterFounded","productChanged"],[1,"d-flex","justify-content-between","align-items-start","gap-3"],[1,"d-flex","flex-column","form-group","w-75"],[1,"control-label","mb-2"],["formControlName","description","type","text",1,"form-control"],[1,"d-flex","flex-column","form-group","w-25"],["type","text",1,"form-control",3,"value","readonly"],[1,"d-flex","flex-column","form-group","w-100"],["formControlName","name","type","text",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","business",1,"form-control",3,"ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","gap-3","code-card"],[1,"d-flex","justify-content-between","align-items-start","gap-3",3,"formGroup"],[1,"d-flex","flex-column","form-group","w-33"],["formControlName","type",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["formControlName","code","type","text",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-primary","add-product-btn",3,"disabled","click"],[3,"icon"],[3,"codes","removeIndex"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["class","btn btn-primary","type","button",3,"disabled","click",4,"ngIf"],[1,"component-title"],[1,"invalid-feedback"],[4,"ngIf"],[3,"ngValue"],[3,"value"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(a,o){1&a&&(c.TgZ(0,"div",0)(1,"h5",1),c._UZ(2,"fa-icon",2),c.YNc(3,n9,4,5,"span",3),c.YNc(4,r9,4,5,"span",3),c.YNc(5,f9,4,5,"span",3),c.qZA(),c.TgZ(6,"button",4),c.NdJ("click",function(){return o.activeModal.close("close")}),c.qZA()(),c.TgZ(7,"div",5)(8,"app-product-search",6),c.NdJ("productChanged",function(z){return o.getProduct(z)}),c.qZA(),c.TgZ(9,"div",7)(10,"div",8)(11,"label",9),c._uU(12),c.ALo(13,"capitalize"),c.ALo(14,"translate"),c.qZA(),c._UZ(15,"input",10),c.qZA(),c.TgZ(16,"div",11)(17,"label",9),c._uU(18),c.ALo(19,"capitalize"),c.ALo(20,"translate"),c.qZA(),c._UZ(21,"input",12),c.qZA()(),c.TgZ(22,"div",7)(23,"div",13)(24,"label",9),c._uU(25),c.ALo(26,"capitalize"),c.ALo(27,"translate"),c.qZA(),c._UZ(28,"input",14),c.YNc(29,m9,2,1,"div",15),c.qZA(),c.TgZ(30,"div",13)(31,"label",9),c._uU(32),c.ALo(33,"capitalize"),c.ALo(34,"translate"),c.qZA(),c.TgZ(35,"select",16),c.YNc(36,s9,3,4,"option",17),c.qZA(),c.YNc(37,h9,2,1,"div",15),c.qZA()(),c.TgZ(38,"div",18)(39,"div",19)(40,"div",20)(41,"label",9),c._uU(42),c.ALo(43,"capitalize"),c.ALo(44,"translate"),c.qZA(),c.TgZ(45,"select",21),c.YNc(46,z9,4,6,"option",22),c.ALo(47,"filterProductCode"),c.qZA(),c.YNc(48,p9,2,1,"div",15),c.qZA(),c.TgZ(49,"div",20)(50,"label",9),c._uU(51),c.ALo(52,"capitalize"),c.ALo(53,"translate"),c.qZA(),c._UZ(54,"input",23),c.YNc(55,b9,3,2,"div",15),c.qZA(),c.TgZ(56,"button",24),c.NdJ("click",function(){return o.addCode()}),c._UZ(57,"fa-icon",25),c.qZA()(),c.TgZ(58,"app-product-code-table",26),c.NdJ("removeIndex",function(z){return o.removeCode(z)}),c.qZA()()(),c.TgZ(59,"div",27)(60,"button",28),c.NdJ("click",function(){return o.activeModal.close("close")}),c._uU(61),c.ALo(62,"capitalize"),c.ALo(63,"translate"),c.qZA(),c.YNc(64,u9,4,6,"button",29),c.qZA()),2&a&&(c.xp6(2),c.Q6J("icon",o.faBellConcierge),c.xp6(1),c.Q6J("ngIf",o.mode===o.viewModalMode.CREATE),c.xp6(1),c.Q6J("ngIf",o.mode===o.viewModalMode.EDIT),c.xp6(1),c.Q6J("ngIf",o.mode===o.viewModalMode.VIEW),c.xp6(2),c.Q6J("formGroup",o.form),c.xp6(1),c.Q6J("showSearch",!o.cabysAdded)("clearAfterFounded",!1),c.xp6(4),c.hij(" ",c.lcZ(13,31,c.lcZ(14,33,"descripci\xf3n")),": "),c.xp6(6),c.hij(" ",c.lcZ(19,35,c.lcZ(20,37,"Impuesto")),": "),c.xp6(3),c.Q6J("value",null==o.form.get("taxes").value?null:o.form.get("taxes").value.amount)("readonly",!0),c.xp6(4),c.hij(" ",c.lcZ(26,39,c.lcZ(27,41,"nombre")),": "),c.xp6(3),c.Q6J("ngClass",c.WLB(61,V,o.form.controls.name.touched&&o.form.controls.name.errors,o.form.controls.name.valid)),c.xp6(1),c.Q6J("ngIf",o.form.controls.name.touched&&o.form.controls.name.errors),c.xp6(3),c.hij(" ",c.lcZ(33,43,c.lcZ(34,45,"negocio")),": "),c.xp6(3),c.Q6J("ngClass",c.WLB(64,V,o.form.controls.business.touched&&o.form.controls.business.errors,o.form.controls.business.valid)),c.xp6(1),c.Q6J("ngForOf",o.businesses),c.xp6(1),c.Q6J("ngIf",o.form.controls.business.touched&&o.form.controls.business.errors),c.xp6(2),c.Q6J("formGroup",o.businessForm),c.xp6(3),c.hij(" ",c.lcZ(43,47,c.lcZ(44,49,"Tipo de c\xf3digo")),": "),c.xp6(3),c.Q6J("ngClass",c.WLB(67,V,o.businessForm.controls.type.touched&&o.businessForm.controls.type.errors,o.businessForm.controls.type.valid)),c.xp6(1),c.Q6J("ngForOf",c.lcZ(47,51,o.codes)),c.xp6(2),c.Q6J("ngIf",o.businessForm.controls.type.touched&&o.businessForm.controls.type.errors),c.xp6(3),c.hij(" ",c.lcZ(52,53,c.lcZ(53,55,"c\xf3digo")),": "),c.xp6(3),c.Q6J("ngClass",c.WLB(70,V,o.businessForm.controls.code.touched&&o.businessForm.controls.code.errors,o.businessForm.controls.code.valid)),c.xp6(1),c.Q6J("ngIf",o.businessForm.controls.code.touched&&o.businessForm.controls.code.errors),c.xp6(1),c.Q6J("disabled",o.businessForm.invalid),c.xp6(1),c.Q6J("icon",o.faPlus),c.xp6(1),c.Q6J("codes",o.codes),c.xp6(3),c.hij(" ",c.lcZ(62,57,c.lcZ(63,59,"cerrar"))," "),c.xp6(3),c.Q6J("ngIf",o.mode!==o.viewModalMode.VIEW))},dependencies:[v.uH,v.BN,s.O5,h.aw,h.X$,H.P,A.e,l.UX,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.sg,l.u,s.mk,s.ez,s.sg,v1,o9,l9,i9],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.code-card[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:8px;padding:16px}.code-card[_ngcontent-%COMP%]   .add-product-btn[_ngcontent-%COMP%]{margin-top:28px}"],changeDetection:0}),e})()},163:(x,M,r)=>{r.d(M,{t:()=>l});var l=(()=>((l=l||{})[l.VIEW=0]="VIEW",l[l.CREATE=1]="CREATE",l[l.EDIT=2]="EDIT",l))()},1217:(x,M,r)=>{r.d(M,{M:()=>s});var l=r(4230),C=r(7557),v=r(755);let s=(()=>{class h extends l.M{constructor(p){super(p),this.url=C.kJ,this.urlId=C.PO}}return h.\u0275fac=function(p){return new(p||h)(v.LFG(v.zs3))},h.\u0275prov=v.Yz7({token:h,factory:h.\u0275fac}),h})()}}]);