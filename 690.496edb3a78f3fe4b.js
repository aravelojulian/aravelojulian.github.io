"use strict";(self.webpackChunkfact_front=self.webpackChunkfact_front||[]).push([[690],{7690:(en,D,u)=>{u.r(D),u.d(D,{CreateInvoiceModule:()=>Wo});var c=u(6733),a=u(3226),J=u(6752),e=u(755),v=u(932),d=u(1749),_=u(4288),T=u(3690),p=u(4039),m=u(8513);function K(o,i){if(1&o&&e._UZ(0,"fa-icon",11),2&o){const t=e.oxw().$implicit;e.Q6J("icon",t.icon)}}function ee(o,i){if(1&o&&(e.TgZ(0,"span",12),e._uU(1),e.qZA()),2&o){const t=e.oxw().index;e.xp6(1),e.Oqu(t)}}function te(o,i){if(1&o&&(e.TgZ(0,"div",8),e.YNc(1,K,1,1,"fa-icon",9),e.YNc(2,ee,2,1,"span",10),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&o){const t=i.$implicit,n=i.index,r=e.oxw();e.ekj("active",n===r.currentStep)("done",n<r.currentStep)("last-step",n===r.steps.length-1),e.xp6(1),e.Q6J("ngIf",null==t?null:t.icon),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.icon)),e.xp6(2),e.Oqu(t.title)}}function oe(o,i){1&o&&e.GkF(0)}function ne(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.clickNext())}),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.disableNext),e.xp6(1),e.hij(" ",e.lcZ(2,2,e.lcZ(3,4,"siguiente"))," ")}}function ae(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.complete())}),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"finalizar"))," "))}var s=(()=>((s=s||{})[s.ISSUER=0]="ISSUER",s[s.RECEIVER=1]="RECEIVER",s[s.LINES_DETAILS=2]="LINES_DETAILS",s[s.OTHER_CHARGES=3]="OTHER_CHARGES",s[s.BILL_NOTES=4]="BILL_NOTES",s[s.FILE_UPLOAD=5]="FILE_UPLOAD",s[s.SUMMARY=6]="SUMMARY",s))();let S=(()=>{class o{constructor(){this.currentStep=0,this.disablePrev=!0,this.disableNext=!1,this.next=new e.vpe,this.prev=new e.vpe,this.finalize=new e.vpe}clickNext(){this.currentStep<this.steps?.length-1&&this.next.emit()}clickPrev(){this.currentStep>0&&this.prev.emit()}complete(){this.finalize.emit()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-stepper"]],inputs:{steps:"steps",currentStep:"currentStep",disablePrev:"disablePrev",disableNext:"disableNext"},outputs:{next:"next",prev:"prev",finalize:"finalize"},standalone:!0,features:[e.jDz],decls:11,vars:10,consts:[[1,"stepper-container"],["class","stepper-step",3,"active","done","last-step",4,"ngFor","ngForOf"],[1,"stepper-content"],[4,"ngTemplateOutlet"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"btn","btn-outline-primary",3,"disabled","click"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"stepper-step"],["class","stepper-index",3,"icon",4,"ngIf"],["class","stepper-index",4,"ngIf"],[1,"stepper-index",3,"icon"],[1,"stepper-index"],[1,"btn","btn-primary",3,"disabled","click"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,te,5,9,"div",1),e.qZA(),e.TgZ(2,"div",2),e.YNc(3,oe,1,0,"ng-container",3),e.qZA(),e.TgZ(4,"div",4)(5,"button",5),e.NdJ("click",function(){return n.clickPrev()}),e._uU(6),e.ALo(7,"titlecase"),e.ALo(8,"translate"),e.qZA(),e.YNc(9,ne,4,6,"button",6),e.YNc(10,ae,4,5,"button",7),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.steps),e.xp6(2),e.Q6J("ngTemplateOutlet",n.steps[n.currentStep].body),e.xp6(2),e.Q6J("disabled",0===n.currentStep||n.disablePrev),e.xp6(1),e.hij(" ",e.lcZ(7,6,e.lcZ(8,8,"anterior"))," "),e.xp6(3),e.Q6J("ngIf",n.currentStep<n.steps.length-1),e.xp6(1),e.Q6J("ngIf",n.currentStep===n.steps.length-1))},dependencies:[c.sg,c.tP,p.aw,p.X$,m.uH,m.BN,c.O5,c.rS],styles:['.stepper-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:3rem}.stepper-container[_ngcontent-%COMP%]   .stepper-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:80px;height:80px;padding:8px;border-radius:50%;position:relative}.stepper-container[_ngcontent-%COMP%]   .stepper-step[_ngcontent-%COMP%]:not(.last-step):before{content:"";position:absolute;top:50%;right:-100%;width:calc((100vh - 480px) / 6);height:1px;background-color:#ccc}.stepper-container[_ngcontent-%COMP%]   .stepper-step.active[_ngcontent-%COMP%], .stepper-container[_ngcontent-%COMP%]   .stepper-step.done[_ngcontent-%COMP%], .stepper-container[_ngcontent-%COMP%]   .stepper-step.active[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%], .stepper-container[_ngcontent-%COMP%]   .stepper-step.done[_ngcontent-%COMP%]   .ng-fa-icon[_ngcontent-%COMP%]{color:#fff}.stepper-container[_ngcontent-%COMP%]   .stepper-step[_ngcontent-%COMP%]   .stepper-index[_ngcontent-%COMP%]{font-size:24px;line-height:34px}.stepper-content[_ngcontent-%COMP%]{margin-bottom:3rem}'],changeDetection:0}),o})();var Q=u(4950),C=u(3472),ie=u(9082),g=u(5275),b=u(2295),N=u(997),E=u(8004),k=u(155),j=u(3072),x=u(2997),F=u(1464),w=u(1056),Y=u(1946),re=u(672),Z=u(5893);function le(o,i){if(1&o&&(e.TgZ(0,"option",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.text)," ")}}function se(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el tipo de documento es requerido"))," "))}function ce(o,i){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,se,4,5,"span",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.issuerForm.controls.type.hasError("required"))}}function ue(o,i){if(1&o&&(e.TgZ(0,"option",35),e._uU(1),e.ALo(2,"capitalize"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.descripcion)," ")}}function de(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la actividad de facturaci\xf3n es requerida"))," "))}function pe(o,i){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,de,4,5,"span",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.issuerForm.controls.activity.hasError("required"))}}function me(o,i){if(1&o&&(e.TgZ(0,"option",32),e._uU(1),e.ALo(2,"capitalize"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t)," ")}}function ge(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la moneda de facturaci\xf3n es requerida"))," "))}function he(o,i){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,ge,4,5,"span",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.issuerForm.controls.currency.hasError("required"))}}function _e(o,i){if(1&o&&(e.TgZ(0,"option",32),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,e.lcZ(3,4,null==t?null:t.text))," ")}}function be(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la condici\xf3n de venta es requerida"))," "))}function fe(o,i){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,be,4,5,"span",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.issuerForm.controls.saleCondition.hasError("required"))}}function ve(o,i){if(1&o&&(e.TgZ(0,"option",32),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",null==t?null:t.text," ")}}function Ce(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el m\xe9todo de pago es requerido"))," "))}function xe(o,i){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,Ce,4,5,"span",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.issuerForm.controls.paymentMethod.hasError("required"))}}function Ze(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el t\xe9rmino de cr\xe9dito es requerido"))," "))}function Ae(o,i){if(1&o&&(e.TgZ(0,"div",33),e.YNc(1,Ze,4,5,"span",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.issuerForm.controls.creditTerm.hasError("required"))}}const q=function(o,i){return{"is-invalid":o,"is-valid":i}};let z=(()=>{class o extends T.u{constructor(t,n,r,l,h,L){super(),this._authenticatedUser=t,this._businessService=n,this._salePointService=r,this._haciendaService=l,this._loadingService=h,this._cdRef=L,this.faDollarSign=_.egO,this.faCalendar=N.fT7,this.currencies=g.Mf,this.paymentMethods=g.LM,this.salesConditions=g.ob,this.activities=[],this.invoicesTypes=g.cM,this.issuerForm=new a.nJ({type:new a.p4({value:null,disabled:!1},[a.kI.required]),currency:new a.p4({value:g.wA.USD,disabled:!1},[a.kI.required]),paymentMethod:new a.p4({value:g.hL.CASH,disabled:!1},[a.kI.required]),saleCondition:new a.p4({value:g.Xo.CASH,disabled:!1},[a.kI.required]),exchange:new a.p4({value:null,disabled:!1}),expireDate:new a.p4({value:null,disabled:!1}),orderNumber:new a.p4({value:null,disabled:!1}),internNumber:new a.p4({value:null,disabled:!1}),creditTerm:new a.p4({value:null,disabled:!1}),activity:new a.p4({value:null,disabled:!1},[a.kI.required]),commercialCode:new a.p4({value:null,disabled:!1},[a.kI.required]),businessId:new a.p4({value:null,disabled:!1},[a.kI.required]),salePointId:new a.p4({value:null,disabled:!1},[a.kI.required])}),this.onChange=()=>{},this.onTouched=()=>{}}setCurrencyExchange(){switch(this.issuerForm.get("currency").value){case g.wA.USD:this.issuerForm.get("exchange").setValue(this.exchangeRating?.dolar?.compra?.valor);break;case g.wA.EUR:this.issuerForm.get("exchange").setValue(this.exchangeRating?.euro?.colones);break;case g.wA.COL:this.issuerForm.get("exchange").setValue(1)}this._cdRef.detectChanges()}activityChangeSubscription(){this.issuerForm.get("activity").valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.issuerForm.get("commercialCode").setValue(t?.codigo)}})}currencyChangeSubscription(){this.issuerForm.get("currency").valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{this.setCurrencyExchange()}})}getExchangeRating(){this._haciendaService.getRatings().pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.exchangeRating=t,this.setCurrencyExchange()}})}getBusiness(){this._businessService.get(this._authenticatedUser.getBusiness()).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.business=t,this.issuerForm.get("businessId").setValue(this.business?.uuid),this._cdRef.detectChanges()}})}getSalePoint(){this._salePointService.get(this._authenticatedUser.getSalePoint()).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.salePoint=t,this.issuerForm.get("salePointId").setValue(this.salePoint?.uuid),this._cdRef.detectChanges()}})}getAuthenticatedUserData(){this.authenticatedUser=this._authenticatedUser.getLoggedInUser(),this._haciendaService.getTaxpayerInfo(this.authenticatedUser?.identification?.number).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.activities=t?.actividades,this.activities?.length&&(this.issuerForm.get("activity").setValue(this.activities[0]),this.issuerForm.get("commercialCode").setValue(this.activities[0]?.codigo)),this._loadingService.hide(),this._cdRef.detectChanges()},error:()=>{this._loadingService.hide()}})}changeSaleCondition(){this.issuerForm.get("saleCondition").valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{t===g.Xo.CREDIT?this.issuerForm.get("creditTerm").setValidators([a.kI.required]):this.issuerForm.get("creditTerm").clearValidators(),this.issuerForm.get("creditTerm").updateValueAndValidity()}})}reactToValueChanges(){this.issuerForm.valueChanges.pipe((0,E.x)((t,n)=>JSON.stringify(t)===JSON.stringify(n)),(0,d.R)(this.observableDestroy$),(0,k.b)(100)).subscribe({next:t=>{this.onChange({...t,business:this.business}),this.onTouched()}})}writeValue(t){this.issuerForm.patchValue({...t}),this.issuerForm.value?.commercialCode&&this.issuerForm.get("activity").setValue(this.activities.find(n=>n?.codigo===this.issuerForm.value?.commercialCode))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}ngOnInit(){this._loadingService.show(),this.getBusiness(),this.getSalePoint(),this.getAuthenticatedUserData(),this.getExchangeRating(),this.currencyChangeSubscription(),this.activityChangeSubscription(),this.reactToValueChanges(),this.changeSaleCondition()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.G),e.Y36(F.m),e.Y36(Y.y),e.Y36(w.r),e.Y36(re.b),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-issuer-data"]],standalone:!0,features:[e._Bn([w.r,F.m,Y.y,{provide:a.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.qOj,e.jDz],decls:142,vars:138,consts:[[1,"d-flex","flex-column","gap-3","p-4","invoice-data-group",3,"formGroup"],[1,"d-flex","flex-column","align-items-start","form-group","w-50","gap-1"],[1,"control-label","fw-bold"],["formControlName","type",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"d-flex","flex-column","gap-3"],[1,"component-title"],[1,"w-100","d-flex","flex-column","gap-1"],[1,"d-flex","justify-content-between","gap-3"],[1,"d-flex","flex-column","w-100"],[1,"d-flex","flex-column","gap-2","mt-4"],[1,"d-flex","justify-content-between","align-items-start","gap-3"],[1,"d-flex","flex-column","form-group","w-100","gap-1"],[1,"fw-bold"],["formControlName","activity",1,"form-control",3,"ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],["formControlName","currency",1,"form-control",3,"ngClass"],[1,"input-group"],[1,"input-group-addon"],[1,"input-group-prepend"],[1,"input-group-text"],[3,"icon"],["type","text","formControlName","exchange","readonly","",1,"form-control"],["formControlName","saleCondition",1,"form-control",3,"ngClass"],["formControlName","paymentMethod",1,"form-control",3,"ngClass"],["placeholder","yyyy-mm-dd","name","dp","formControlName","expireDate","ngbDatepicker","",1,"form-control"],["d","ngbDatepicker"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","text","formControlName","internNumber",1,"form-control"],["type","text","formControlName","orderNumber",1,"form-control"],["type","text","formControlName","creditTerm",1,"form-control",3,"ngClass"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],[3,"ngValue"]],template:function(t,n){if(1&t){const r=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3),e.ALo(4,"capitalize"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"select",3),e.YNc(7,le,3,4,"option",4),e.qZA(),e.YNc(8,ce,2,1,"div",5),e.qZA(),e.TgZ(9,"div",6)(10,"span",7),e._uU(11),e.ALo(12,"capitalize"),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"div",8)(15,"span")(16,"strong"),e._uU(17),e.ALo(18,"titlecase"),e.ALo(19,"translate"),e.qZA(),e._uU(20),e.qZA()(),e.TgZ(21,"div",8)(22,"span")(23,"strong"),e._uU(24),e.ALo(25,"titlecase"),e.ALo(26,"translate"),e.qZA(),e._uU(27),e.qZA()(),e.TgZ(28,"div",9)(29,"div",8)(30,"span")(31,"strong"),e._uU(32),e.ALo(33,"titlecase"),e.ALo(34,"translate"),e.qZA()()(),e.TgZ(35,"div",8)(36,"span")(37,"strong"),e._uU(38),e.ALo(39,"titlecase"),e.ALo(40,"translate"),e.qZA(),e._uU(41),e.qZA()()(),e.TgZ(42,"div",9)(43,"div",8)(44,"span")(45,"strong"),e._uU(46),e.ALo(47,"titlecase"),e.ALo(48,"translate"),e.qZA(),e._uU(49),e.qZA()(),e.TgZ(50,"div",8)(51,"span")(52,"strong"),e._uU(53),e.ALo(54,"titlecase"),e.ALo(55,"translate"),e.qZA(),e._uU(56),e.qZA()()(),e.TgZ(57,"div",10)(58,"span")(59,"strong"),e._uU(60),e.ALo(61,"titlecase"),e.ALo(62,"translate"),e.qZA(),e._uU(63),e.qZA(),e.TgZ(64,"span"),e._uU(65),e.qZA()()(),e.TgZ(66,"div",11)(67,"div",12)(68,"div",13)(69,"label",14),e._uU(70),e.ALo(71,"titlecase"),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"select",15),e.YNc(74,ue,3,4,"option",16),e.qZA(),e.YNc(75,pe,2,1,"div",5),e.qZA(),e.TgZ(76,"div",13)(77,"label",14),e._uU(78),e.ALo(79,"titlecase"),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"select",17),e.YNc(82,me,3,4,"option",4),e.qZA(),e.YNc(83,he,2,1,"div",5),e.qZA(),e.TgZ(84,"div",13)(85,"label",14),e._uU(86),e.ALo(87,"titlecase"),e.ALo(88,"translate"),e.qZA(),e.TgZ(89,"div",18)(90,"div",19)(91,"div",20)(92,"span",21),e._UZ(93,"fa-icon",22),e.qZA()()(),e._UZ(94,"input",23),e.qZA()()(),e.TgZ(95,"div",12)(96,"div",13)(97,"label",14),e._uU(98),e.ALo(99,"titlecase"),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"select",24),e.YNc(102,_e,4,6,"option",4),e.qZA(),e.YNc(103,fe,2,1,"div",5),e.qZA(),e.TgZ(104,"div",13)(105,"label",14),e._uU(106),e.ALo(107,"titlecase"),e.ALo(108,"translate"),e.qZA(),e.TgZ(109,"select",25),e.YNc(110,ve,2,2,"option",4),e.qZA(),e.YNc(111,xe,2,1,"div",5),e.qZA(),e.TgZ(112,"div",8)(113,"span",14),e._uU(114),e.ALo(115,"titlecase"),e.ALo(116,"translate"),e.qZA(),e.TgZ(117,"div",18),e._UZ(118,"input",26,27),e.TgZ(120,"button",28),e.NdJ("click",function(){e.CHM(r);const h=e.MAs(119);return e.KtG(h.toggle())}),e._UZ(121,"fa-icon",22),e.qZA()()()(),e.TgZ(122,"div",12)(123,"div",13)(124,"label",14),e._uU(125),e.ALo(126,"titlecase"),e.ALo(127,"translate"),e.qZA(),e._UZ(128,"input",29),e.qZA(),e.TgZ(129,"div",13)(130,"label",14),e._uU(131),e.ALo(132,"titlecase"),e.ALo(133,"translate"),e.qZA(),e._UZ(134,"input",30),e.qZA(),e.TgZ(135,"div",13)(136,"label",14),e._uU(137),e.ALo(138,"titlecase"),e.ALo(139,"translate"),e.qZA(),e._UZ(140,"input",31),e.YNc(141,Ae,2,1,"div",5),e.qZA()()()()}2&t&&(e.Q6J("formGroup",n.issuerForm),e.xp6(3),e.hij(" ",e.lcZ(4,48,e.lcZ(5,50,"Tipo de documento")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(120,q,n.issuerForm.controls.type.touched&&n.issuerForm.controls.type.errors,n.issuerForm.controls.type.valid)),e.xp6(1),e.Q6J("ngForOf",n.invoicesTypes),e.xp6(1),e.Q6J("ngIf",n.issuerForm.controls.type.touched&&n.issuerForm.controls.type.errors),e.xp6(3),e.Oqu(e.lcZ(12,52,e.lcZ(13,54,"datos del emisor"))),e.xp6(6),e.hij("",e.lcZ(18,56,e.lcZ(19,58,"nombre")),":"),e.xp6(3),e.hij(" ",null==n.business?null:n.business.name,""),e.xp6(4),e.hij("",e.lcZ(25,60,e.lcZ(26,62,"nom. comercial")),":"),e.xp6(3),e.hij(" ",null==n.business?null:n.business.commercial_name,""),e.xp6(5),e.hij("",e.lcZ(33,64,e.lcZ(34,66,"ident. jur\xeddica")),":"),e.xp6(6),e.hij("",e.lcZ(39,68,e.lcZ(40,70,"correo")),":"),e.xp6(3),e.hij(" ",null==n.business?null:n.business.email,""),e.xp6(5),e.hij("",e.lcZ(47,72,e.lcZ(48,74,"no. tel")),":"),e.xp6(3),e.hij(" ",null==n.business?null:n.business.phone_number,""),e.xp6(4),e.hij("",e.lcZ(54,76,e.lcZ(55,78,"fax")),":"),e.xp6(3),e.hij(" ",null==n.business?null:n.business.fax,""),e.xp6(4),e.hij("",e.lcZ(61,80,e.lcZ(62,82,"direcci\xf3n")),":"),e.xp6(3),e.HOy(" ",null==n.business||null==n.business.location?null:n.business.location.province," ",null==n.business||null==n.business.location?null:n.business.location.canton," ",null==n.business||null==n.business.location?null:n.business.location.district," ",null==n.business||null==n.business.location?null:n.business.location.neighborhood," "),e.xp6(2),e.Oqu(null==n.business||null==n.business.location?null:n.business.location.other_signs),e.xp6(5),e.hij(" ",e.lcZ(71,84,e.lcZ(72,86,"actividad")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(123,q,n.issuerForm.controls.activity.touched&&n.issuerForm.controls.activity.errors,n.issuerForm.controls.activity.valid)),e.xp6(1),e.Q6J("ngForOf",n.activities),e.xp6(1),e.Q6J("ngIf",n.issuerForm.controls.activity.touched&&n.issuerForm.controls.activity.errors),e.xp6(3),e.hij(" ",e.lcZ(79,88,e.lcZ(80,90,"moneda")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(126,q,n.issuerForm.controls.currency.touched&&n.issuerForm.controls.currency.errors,n.issuerForm.controls.currency.valid)),e.xp6(1),e.Q6J("ngForOf",n.currencies),e.xp6(1),e.Q6J("ngIf",n.issuerForm.controls.currency.touched&&n.issuerForm.controls.currency.errors),e.xp6(3),e.hij(" ",e.lcZ(87,92,e.lcZ(88,94,"tipo cambio")),": "),e.xp6(7),e.Q6J("icon",n.faDollarSign),e.xp6(5),e.hij(" ",e.lcZ(99,96,e.lcZ(100,98,"condici\xf3n venta")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(129,q,n.issuerForm.controls.saleCondition.touched&&n.issuerForm.controls.saleCondition.errors,n.issuerForm.controls.saleCondition.valid)),e.xp6(1),e.Q6J("ngForOf",n.salesConditions),e.xp6(1),e.Q6J("ngIf",n.issuerForm.controls.saleCondition.touched&&n.issuerForm.controls.saleCondition.errors),e.xp6(3),e.hij(" ",e.lcZ(107,100,e.lcZ(108,102,"medio pago")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(132,q,n.issuerForm.controls.paymentMethod.touched&&n.issuerForm.controls.paymentMethod.errors,n.issuerForm.controls.paymentMethod.valid)),e.xp6(1),e.Q6J("ngForOf",n.paymentMethods),e.xp6(1),e.Q6J("ngIf",n.issuerForm.controls.paymentMethod.touched&&n.issuerForm.controls.paymentMethod.errors),e.xp6(3),e.hij("",e.lcZ(115,104,e.lcZ(116,106,"fecha vencimiento")),":"),e.xp6(7),e.Q6J("icon",n.faCalendar),e.xp6(4),e.hij(" ",e.lcZ(126,108,e.lcZ(127,110,"no. interno")),": "),e.xp6(6),e.hij(" ",e.lcZ(132,112,e.lcZ(133,114,"orden compra")),": "),e.xp6(6),e.hij(" ",e.lcZ(138,116,e.lcZ(139,118,"t\xe9rmino de cr\xe9dito")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(135,q,n.issuerForm.controls.creditTerm.touched&&n.issuerForm.controls.creditTerm.errors,n.issuerForm.controls.creditTerm.valid)),e.xp6(1),e.Q6J("ngIf",n.issuerForm.controls.creditTerm.touched&&n.issuerForm.controls.creditTerm.errors))},dependencies:[p.aw,p.X$,c.rS,x.P,Z.e,c.sg,a.UX,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u,c.O5,c.mk,m.uH,m.BN,b.J4],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.invoice-data-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 0 4px 1px #6161614d;-moz-box-shadow:0 0 4px 1px rgba(97,97,97,.3);-webkit-box-shadow:0 0 4px 1px rgba(97,97,97,.3)}"],changeDetection:0}),o})();var Te=u(3551),Oe=u(4888),qe=u(5687),R=u(1276),ye=u(3628),Me=u(163),Pe=u(6610),V=u(8982);function Le(o,i){if(1&o&&(e.TgZ(0,"option",24),e._uU(1),e.ALo(2,"capitalize"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",null==t?null:t.uuid),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.name)," ")}}function Fe(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe escoger un receptor para la factura"))," "))}function we(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Fe,4,5,"span",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.clientForm.controls.client.hasError("required"))}}function Ie(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el nombre es requerido"))," "))}function Je(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Ie,4,5,"span",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.receiverForm.controls.name.hasError("required"))}}function Ne(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el destinatario es requerido"))," "))}function Ee(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Ne,4,5,"span",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.receiverForm.controls.receiver.hasError("required"))}}function ke(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el c\xf3digo interno es requerido"))," "))}function Ue(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,ke,4,5,"span",26),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.receiverForm.controls.internCode.hasError("required"))}}function De(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el formato de email es incorrecto")),". "))}function Se(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,De,4,5,"span",26),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.hasError("pattern"))}}const y=function(o,i){return{"is-invalid":o,"is-valid":i}};function Qe(o,i){if(1&o&&(e.TgZ(0,"div",30)(1,"div",31),e._UZ(2,"input",32),e.YNc(3,Se,2,1,"div",7),e.qZA()()),2&o){const t=i.$implicit;e.xp6(2),e.Q6J("formControl",t)("readonly",!0)("ngClass",e.WLB(4,y,t.touched&&t.errors,t.valid)),e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function je(o,i){if(1&o&&(e.TgZ(0,"div",27)(1,"div",14)(2,"label",15),e._uU(3),e.ALo(4,"capitalize"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",28),e.YNc(7,Qe,4,7,"div",29),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,e.lcZ(5,4,"correos")),": "),e.xp6(4),e.Q6J("ngForOf",t.emails().controls)}}function Ye(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el formato de email es incorrecto")),". "))}function ze(o,i){if(1&o&&(e.TgZ(0,"div",25),e.YNc(1,Ye,4,5,"span",26),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.hasError("pattern"))}}function Re(o,i){if(1&o&&(e.TgZ(0,"div",30)(1,"div",31),e._UZ(2,"input",32),e.YNc(3,ze,2,1,"div",7),e.qZA()()),2&o){const t=i.$implicit;e.xp6(2),e.Q6J("formControl",t)("readonly",!0)("ngClass",e.WLB(4,y,t.touched&&t.errors,t.valid)),e.xp6(1),e.Q6J("ngIf",t.touched&&t.errors)}}function Ve(o,i){if(1&o&&(e.TgZ(0,"div",27)(1,"div",14)(2,"label",15),e._uU(3),e.ALo(4,"capitalize"),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",28),e.YNc(7,Re,4,7,"div",29),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,e.lcZ(5,4,"copias de cortes\xeda")),": "),e.xp6(4),e.Q6J("ngForOf",t.courtesyEmails().controls)}}let B=(()=>{class o extends T.u{constructor(t,n,r,l){super(),this._clientService=t,this._modalService=n,this._utilsService=r,this._cdRef=l,this.clientForm=new a.nJ({client:new a.p4({value:null,disabled:!1},[a.kI.required])}),this.receiverForm=new a.nJ({uuid:new a.p4({value:null,disabled:!1},[a.kI.required]),identificationNumber:new a.p4({value:null,disabled:!1},[a.kI.required]),identificationType:new a.p4({value:null,disabled:!1},[a.kI.required]),name:new a.p4({value:null,disabled:!1},[a.kI.required]),location:new a.p4({value:null,disabled:!1}),country:new a.p4({value:null,disabled:!1}),phone_number:new a.p4({value:null,disabled:!1},[a.kI.required]),receiver:new a.p4({value:null,disabled:!1}),internCode:new a.p4({value:null,disabled:!1}),emails:new a.vC([],[a.kI.minLength(1)]),courtesyEmails:new a.vC([])}),this.faAdd=_.XSk,this.clients=[],this.onChange=()=>{},this.onTouched=()=>{}}getClients(){this._clientService.getElements({limit:1e3}).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.clients=t?.results,this._cdRef.detectChanges()}})}getClient(t){this._clientService.get(t).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:n=>{this.identification={number:n?.identification?.number,type:n?.identification?.type};const{phone:l}=this._utilsService.separatePhoneCodeAndNumber(n?.phone_number);this.receiverForm.patchValue({uuid:n?.uuid,name:n?.name,identificationNumber:n?.identification?.number,identificationType:n?.identification?.type,phone_number:l,receiver:n?.receiver,country:n?.country,internCode:n?.internal_code,location:{province:n?.location?.province?.uuid,canton:n?.location?.canton?.uuid,district:n?.location?.district?.uuid,neighborhood:n?.location?.neighborhood?.uuid,other_signs:n?.location?.other_signs}}),this._cdRef.detectChanges()}})}reactToValueChanges(){this.clientForm.get("client").valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{t&&this.getClient(t)}}),this.receiverForm.valueChanges.pipe((0,E.x)((t,n)=>JSON.stringify(t)===JSON.stringify(n)),(0,d.R)(this.observableDestroy$),(0,k.b)(100)).subscribe({next:t=>{this.onChange({...t}),this.onTouched()}})}writeValue(t){this.receiverForm.patchValue({...t}),this.receiverForm.value?.uuid&&this.clientForm.get("client").setValue(this.receiverForm.value?.uuid)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}emails(){return this.receiverForm.get("emails")}courtesyEmails(){return this.receiverForm.get("courtesyEmails")}getTaxpayer(t){t&&this.receiverForm.patchValue({name:t.nombre,identification:t?.numeroIdentificacion,identificationType:t?.tipoIdentificacion})}createClient(){this.clientForm.reset(),this.receiverForm.reset({uuid:null,name:null,identificationNumber:null,identificationType:null,phone_number:null,receiver:null,country:null,code:null,location:{province:null,canton:null,district:null,neighborhood:null,other_signs:null}}),this.identification={number:null,type:null},this._cdRef.detectChanges();const t=this._modalService.open(ye.m,{size:"lg",backdrop:"static"});t.componentInstance.viewMode=Me.t.CREATE,t.result.then(n=>{"string"!=typeof n&&this._clientService.create(n).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{this.getClients()}})})}ngOnInit(){this.getClients(),this.reactToValueChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(R.y),e.Y36(b.FF),e.Y36(V.F),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-receiver-data"]],standalone:!0,features:[e._Bn([Oe.T,R.y,{provide:a.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.qOj,e.jDz],decls:55,vars:70,consts:[[1,"d-flex","flex-column","gap-3","p-4","invoice-data-group"],[1,"d-flex","align-items-start","gap-3",3,"formGroup"],[1,"d-flex","align-items-start","gap-3","form-group","flex-grow-1"],[1,"control-label","mt-2"],[1,"d-flex","flex-column","w-100"],["formControlName","client",1,"form-control",3,"ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary","d-flex","align-items-center","gap-2",3,"click"],[3,"icon"],[1,"d-flex","flex-column","gap-3",3,"formGroup"],[1,"component-title"],[3,"data","readonly","taxpayerFounded"],[1,"d-flex","justify-content-between","gap-3"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["formControlName","name","type","text",1,"form-control",3,"readonly","ngClass"],[1,"d-flex","flex-column","form-group","w-25"],["type","text",1,"form-control",3,"value","readonly"],["formControlName","phone_number",1,"w-100",3,"readonly"],["formControlName","location",3,"readonly"],["formControlName","receiver","type","text",1,"form-control",3,"readonly","ngClass"],["formControlName","internCode","type","text",1,"form-control",3,"readonly","ngClass"],["class","d-flex justify-content-end gap-3 w-100",4,"ngIf"],[3,"ngValue"],[1,"invalid-feedback"],[4,"ngIf"],[1,"d-flex","justify-content-end","gap-3","w-100"],[1,"d-flex","justify-content-between","align-items-center","flex-wrap","gap-3","w-100"],["class","d-flex justify-content-start align-items-start gap-1 w-49",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-start","align-items-start","gap-1","w-49"],[1,"w-100"],["type","text",1,"form-control",3,"formControl","readonly","ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"capitalize"),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",4)(8,"select",5),e.YNc(9,Le,3,4,"option",6),e.qZA(),e.YNc(10,we,2,1,"div",7),e.qZA()(),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.createClient()}),e._UZ(12,"fa-icon",9),e._uU(13),e.ALo(14,"capitalize"),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",10)(17,"span",11),e._uU(18),e.ALo(19,"capitalize"),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"app-identification-search",12),e.NdJ("taxpayerFounded",function(l){return n.getTaxpayer(l)}),e.qZA(),e.TgZ(22,"div",13)(23,"div",14)(24,"label",15),e._uU(25),e.ALo(26,"capitalize"),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",16),e.YNc(29,Je,2,1,"div",7),e.qZA(),e.TgZ(30,"div",17)(31,"label",15),e._uU(32),e.ALo(33,"capitalize"),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"input",18),e.qZA(),e._UZ(36,"app-phone",19),e.qZA(),e._UZ(37,"app-location",20),e.TgZ(38,"div",13)(39,"div",14)(40,"label",15),e._uU(41),e.ALo(42,"capitalize"),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"input",21),e.YNc(45,Ee,2,1,"div",7),e.qZA(),e.TgZ(46,"div",14)(47,"label",15),e._uU(48),e.ALo(49,"capitalize"),e.ALo(50,"translate"),e.qZA(),e._UZ(51,"input",22),e.YNc(52,Ue,2,1,"div",7),e.qZA()(),e.YNc(53,je,8,6,"div",23),e.YNc(54,Ve,8,6,"div",23),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.clientForm),e.xp6(3),e.hij(" ",e.lcZ(5,30,e.lcZ(6,32,"clientes")),": "),e.xp6(4),e.Q6J("ngClass",e.WLB(58,y,n.clientForm.controls.client.touched&&n.clientForm.controls.client.errors,n.clientForm.controls.client.valid)),e.xp6(1),e.Q6J("ngForOf",n.clients),e.xp6(1),e.Q6J("ngIf",n.clientForm.controls.client.touched&&n.clientForm.controls.client.errors),e.xp6(2),e.Q6J("icon",n.faAdd),e.xp6(1),e.hij(" ",e.lcZ(14,34,e.lcZ(15,36,"crear cliente"))," "),e.xp6(3),e.Q6J("formGroup",n.receiverForm),e.xp6(2),e.Oqu(e.lcZ(19,38,e.lcZ(20,40,"datos del receptor"))),e.xp6(3),e.Q6J("data",n.identification)("readonly",!0),e.xp6(4),e.hij(" ",e.lcZ(26,42,e.lcZ(27,44,"nombre")),": "),e.xp6(3),e.Q6J("readonly",!0)("ngClass",e.WLB(61,y,n.receiverForm.controls.name.touched&&n.receiverForm.controls.name.errors,n.receiverForm.controls.name.valid)),e.xp6(1),e.Q6J("ngIf",n.receiverForm.controls.name.touched&&n.receiverForm.controls.name.errors),e.xp6(3),e.hij(" ",e.lcZ(33,46,e.lcZ(34,48,"pa\xeds")),": "),e.xp6(3),e.Q6J("value",null==n.receiverForm.controls.country.value?null:n.receiverForm.controls.country.value.name)("readonly",!0),e.xp6(1),e.Q6J("readonly",!0),e.xp6(1),e.Q6J("readonly",!0),e.xp6(4),e.hij(" ",e.lcZ(42,50,e.lcZ(43,52,"destinatario")),": "),e.xp6(3),e.Q6J("readonly",!0)("ngClass",e.WLB(64,y,n.receiverForm.controls.receiver.touched&&n.receiverForm.controls.receiver.errors,n.receiverForm.controls.receiver.valid)),e.xp6(1),e.Q6J("ngIf",n.receiverForm.controls.receiver.touched&&n.receiverForm.controls.receiver.errors),e.xp6(3),e.hij(" ",e.lcZ(49,54,e.lcZ(50,56,"c\xf3digo interno")),": "),e.xp6(3),e.Q6J("readonly",!0)("ngClass",e.WLB(67,y,n.receiverForm.controls.internCode.touched&&n.receiverForm.controls.internCode.errors,n.receiverForm.controls.internCode.valid)),e.xp6(1),e.Q6J("ngIf",n.receiverForm.controls.internCode.touched&&n.receiverForm.controls.internCode.errors),e.xp6(1),e.Q6J("ngIf",null==n.emails().controls?null:n.emails().controls.length),e.xp6(1),e.Q6J("ngIf",null==n.courtesyEmails().controls?null:n.courtesyEmails().controls.length))},dependencies:[a.UX,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.oH,a.sg,a.u,p.aw,p.X$,x.P,Z.e,Te.v,c.O5,c.mk,c.sg,m.uH,m.BN,qe.n,Pe.$,a.u5],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.invoice-data-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 0 4px 1px #6161614d;-moz-box-shadow:0 0 4px 1px rgba(97,97,97,.3);-webkit-box-shadow:0 0 4px 1px rgba(97,97,97,.3)}"],changeDetection:0}),o})();function Be(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"td")(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"td")(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"td")(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"td")(19,"span"),e._uU(20),e.qZA()(),e.TgZ(21,"td")(22,"span"),e._uU(23),e.qZA()(),e.TgZ(24,"td")(25,"span"),e._uU(26),e.qZA()(),e.TgZ(27,"td")(28,"div",3)(29,"fa-icon",4),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.updateLine(l))}),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"fa-icon",4),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.removeLine(null==l?null:l.code))}),e.ALo(32,"translate"),e.qZA()()()()}if(2&o){const t=i.$implicit,n=i.index,r=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(3),e.Oqu(null==t?null:t.code),e.xp6(3),e.Oqu(null==t||null==t.unit_measurement?null:t.unit_measurement.name),e.xp6(3),e.Oqu(null==t?null:t.quantity),e.xp6(3),e.Oqu(null==t?null:t.unit_price),e.xp6(3),e.Oqu(null==t?null:t.discount),e.xp6(3),e.Oqu(null==t?null:t.other_taxes),e.xp6(3),e.Oqu(null==t?null:t.calculatedTax),e.xp6(3),e.Oqu(null==t?null:t.total_amount),e.xp6(3),e.Q6J("icon",r.faPencil)("ngbTooltip",e.lcZ(30,13,"Editar l\xednea")),e.xp6(2),e.Q6J("icon",r.faTrashCan)("ngbTooltip",e.lcZ(32,15,"Eliminar l\xednea"))}}let Xe=(()=>{class o{constructor(){this.faTrashCan=_.Vui,this.faPencil=_.TzT,this.elements=(0,e.tdS)([]),this.viewLine=new e.vpe,this.bills=new e.vpe}set addLine(t){if(t){const n=this.elements().findIndex(r=>r?.code===t?.code);this.elements.mutate(n>-1?r=>{r.splice(n,1,t)}:r=>{r.push(t)}),this.bills.emit(this.elements())}}updateLine(t){this.viewLine.emit(t)}removeLine(t){this.elements.mutate(n=>{n=n.filter(r=>r?.code!==t)})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-line-table"]],inputs:{addLine:"addLine"},outputs:{viewLine:"viewLine",bills:"bills"},standalone:!0,features:[e.jDz],decls:40,vars:41,consts:[[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"icons-table-container"],["placement","left",3,"icon","ngbTooltip","click"]],template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",1),e._uU(6),e.ALo(7,"uppercase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",1),e._uU(10),e.ALo(11,"uppercase"),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",1),e._uU(14),e.ALo(15,"uppercase"),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th",1),e._uU(18),e.ALo(19,"uppercase"),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th",1),e._uU(22),e.ALo(23,"uppercase"),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"th",1),e._uU(26),e.ALo(27,"uppercase"),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"th",1),e._uU(30),e.ALo(31,"uppercase"),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"th",1),e._uU(34),e.ALo(35,"uppercase"),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"th",1),e.qZA()(),e.TgZ(38,"tbody"),e.YNc(39,Be,33,17,"tr",2),e.qZA()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,9,e.lcZ(8,11,"c\xf3digo"))),e.xp6(4),e.Oqu(e.lcZ(11,13,e.lcZ(12,15,"unidad"))),e.xp6(4),e.Oqu(e.lcZ(15,17,e.lcZ(16,19,"cantidad"))),e.xp6(4),e.Oqu(e.lcZ(19,21,e.lcZ(20,23,"precio"))),e.xp6(4),e.Oqu(e.lcZ(23,25,e.lcZ(24,27,"descuento"))),e.xp6(4),e.Oqu(e.lcZ(27,29,e.lcZ(28,31,"otros impuestos"))),e.xp6(4),e.Oqu(e.lcZ(31,33,e.lcZ(32,35,"I.V.A"))),e.xp6(4),e.Oqu(e.lcZ(35,37,e.lcZ(36,39,"total neto"))),e.xp6(5),e.Q6J("ngForOf",n.elements()))},dependencies:[p.aw,p.X$,c.gd,c.sg,m.uH,m.BN,b._L],changeDetection:0}),o})();var f=u(2845),X=u(1217),Ge=u(8448);let $e=(()=>{class o{constructor(t){this.activeModal=t,this.faMoneyCheckDollar=_.bIM,this.form=new a.nJ({agregateValueTax:new a.p4({value:0,disabled:!1}),exciseTax:new a.p4({value:0,disabled:!1}),singleFuelTax:new a.p4({value:0,disabled:!1}),specificAlcoholicBeveragesTax:new a.p4({value:0,disabled:!1}),SpecificNonAlcoholicBeveragesToiletSoapsTax:new a.p4({value:0,disabled:!1}),tobaccoTax:new a.p4({value:0,disabled:!1}),specialCalculationTax:new a.p4({value:0,disabled:!1}),regimeUsedGoodsFactorTax:new a.p4({value:0,disabled:!1}),specificCementTax:new a.p4({value:0,disabled:!1}),othersTax:new a.p4({value:0,disabled:!1})})}set taxBase(t){t&&this.form.get("agregateValueTax")?.setValue(t)}set taxes(t){t&&this.form.patchValue({...t})}editTaxes(){this.activeModal.close(this.form.value)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(b.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-other-taxes"]],inputs:{taxBase:"taxBase",taxes:"taxes"},standalone:!0,features:[e.jDz],decls:68,vars:66,consts:[[1,"modal-header"],[1,"modal-title","d-flex","align-items-center"],[1,"me-2",3,"icon"],[1,"component-title"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body","d-flex","flex-column","justify-content-start","gap-3","p-3",3,"formGroup"],[1,"d-flex","form-group","justify-content-between","align-items-center","gap-3","w-100"],[1,"control-label","text-end","w-50"],["formControlName","agregateValueTax","type","text","readonly","",1,"form-control","w-50","text-end"],["formControlName","exciseTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","singleFuelTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","specificAlcoholicBeveragesTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","SpecificNonAlcoholicBeveragesToiletSoapsTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","tobaccoTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","specialCalculationTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","regimeUsedGoodsFactorTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","specificCementTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],["formControlName","othersTax","type","number",1,"form-control","w-50","text-end",3,"step","min"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._UZ(2,"fa-icon",2),e.TgZ(3,"span",3),e._uU(4),e.ALo(5,"capitalize"),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"button",4),e.NdJ("click",function(){return n.activeModal.close("close")}),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"input",8),e.qZA(),e.TgZ(14,"div",6)(15,"label",7),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"input",9),e.qZA(),e.TgZ(19,"div",6)(20,"label",7),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"input",10),e.qZA(),e.TgZ(24,"div",6)(25,"label",7),e._uU(26),e.ALo(27,"translate"),e.qZA(),e._UZ(28,"input",11),e.qZA(),e.TgZ(29,"div",6)(30,"label",7),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",12),e.qZA(),e.TgZ(34,"div",6)(35,"label",7),e._uU(36),e.ALo(37,"translate"),e.qZA(),e._UZ(38,"input",13),e.qZA(),e.TgZ(39,"div",6)(40,"label",7),e._uU(41),e.ALo(42,"translate"),e.qZA(),e._UZ(43,"input",14),e.qZA(),e.TgZ(44,"div",6)(45,"label",7),e._uU(46),e.ALo(47,"translate"),e.qZA(),e._UZ(48,"input",15),e.qZA(),e.TgZ(49,"div",6)(50,"label",7),e._uU(51),e.ALo(52,"translate"),e.qZA(),e._UZ(53,"input",16),e.qZA(),e.TgZ(54,"div",6)(55,"label",7),e._uU(56),e.ALo(57,"translate"),e.qZA(),e._UZ(58,"input",17),e.qZA()(),e.TgZ(59,"div",18)(60,"button",19),e.NdJ("click",function(){return n.activeModal.close("close")}),e._uU(61),e.ALo(62,"capitalize"),e.ALo(63,"translate"),e.qZA(),e.TgZ(64,"button",20),e.NdJ("click",function(){return n.editTaxes()}),e._uU(65),e.ALo(66,"capitalize"),e.ALo(67,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("icon",n.faMoneyCheckDollar),e.xp6(2),e.hij(" ",e.lcZ(5,34,e.lcZ(6,36,"editar impuestos"))," "),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(3),e.hij(" ",e.lcZ(12,38,"Impuesto al valor agregado"),": "),e.xp6(5),e.hij(" ",e.lcZ(17,40,"Impuesto selectivo al consumo"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(22,42,"Impuesto \xfanico a los combustibles"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(27,44,"Impuesto espec\xedfico sobre bebidas alcoh\xf3licas"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(32,46,"Impuesto espec\xedfico sobre bebidas sin contenido alcoh\xf3lico y jabones de tocador"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(37,48,"Impuesto al tabaco"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(42,50,"IVA (c\xe1lculo especial)"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(47,52,"IVA r\xe9gimen de bienes usados (Factor)"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(52,54,"Impuesto espec\xedfico sobre cemento"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(57,56,"Otros"),": "),e.xp6(2),e.Q6J("step",.1)("min",0),e.xp6(3),e.hij(" ",e.lcZ(62,58,e.lcZ(63,60,"cerrar"))," "),e.xp6(3),e.Q6J("disabled",n.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(66,62,e.lcZ(67,64,"guardar"))," "))},dependencies:[p.aw,p.X$,x.P,Z.e,m.uH,m.BN,a.UX,a.Fj,a.wV,a.JJ,a.JL,a.qQ,a.sg,a.u],changeDetection:0}),o})();function He(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la documento de exoneraci\xf3n es requerida"))," "))}function We(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el formato de documento es incorrecto"))," "))}function Ke(o,i){if(1&o&&(e.TgZ(0,"div",6),e.YNc(1,He,4,5,"span",7),e.YNc(2,We,4,5,"span",7),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.authorization.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.form.controls.authorization.hasError("pattern"))}}function et(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.getExoneration())}),e._UZ(1,"fa-icon",9),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.form.invalid||t.isSearching),e.xp6(1),e.Q6J("icon",t.faSearch)}}const tt=function(o,i){return{"is-invalid":o,"is-valid":i}};let ot=(()=>{class o extends T.u{constructor(t,n,r){super(),this._haciendaService=t,this._toastService=n,this._cdRef=r,this.faSearch=_.wn1,this.isSearching=!1,this.form=new a.nJ({authorization:new a.p4({value:null,disabled:!1},[a.kI.required,a.kI.pattern(f.U1)])}),this.exonerationPlaceholder="",this.readonly=!1,this.noSearch=!1,this.exonerationFounded=new e.vpe}set document(t){t&&this.form.get("authorization").setValue(t)}getExoneration(){this.isSearching=!0,this._haciendaService.getExonerationInfo(this.form.value?.authorization).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this._toastService.showToast("Se ha encontrado el documento "+t.numeroDocumento,C.p.SUCCESS),this.exonerationFounded.emit(t),this.isSearching=!1,this._cdRef.detectChanges()},error:()=>{this._toastService.showToast("No se ha encontrado el documento "+this.form.value?.authorization,C.p.DANGER),this.exonerationFounded.emit(null),this.isSearching=!1,this._cdRef.detectChanges()}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.r),e.Y36(C.k),e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-exoneration-search"]],inputs:{exonerationPlaceholder:"exonerationPlaceholder",readonly:"readonly",noSearch:"noSearch",document:"document"},outputs:{exonerationFounded:"exonerationFounded"},standalone:!0,features:[e._Bn([w.r]),e.qOj,e.jDz],decls:9,vars:15,consts:[[1,"d-flex","justify-content-between",3,"formGroup","ngClass"],[1,"form-group","w-100"],[1,"form-label","mb-3"],["formControlName","authorization",1,"form-control",3,"placeholder","readonly","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","btn btn-primary",3,"disabled","click",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[1,"btn","btn-primary",3,"disabled","click"],[3,"icon"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3),e.ALo(4,"titlecase"),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"input",3),e.YNc(7,Ke,3,2,"div",4),e.qZA(),e.YNc(8,et,2,2,"button",5),e.qZA()),2&t&&(e.Q6J("formGroup",n.form)("ngClass",n.form.controls.authorization.touched&&n.form.controls.authorization.errors&&!n.readonly&&!n.noSearch?"align-items-center":"align-items-end"),e.xp6(3),e.hij(" ",e.lcZ(4,8,e.lcZ(5,10,"Documento de exoneraci\xf3n")),": "),e.xp6(3),e.Q6J("placeholder",n.exonerationPlaceholder)("readonly",n.readonly||n.noSearch)("ngClass",e.WLB(12,tt,n.form.controls.authorization.touched&&n.form.controls.authorization.errors,n.form.controls.authorization.valid)),e.xp6(1),e.Q6J("ngIf",n.form.controls.authorization.touched&&n.form.controls.authorization.errors&&!n.readonly&&!n.noSearch),e.xp6(1),e.Q6J("ngIf",!n.readonly&&!n.noSearch))},dependencies:[c.ez,c.mk,c.O5,c.rS,a.UX,a.Fj,a.JJ,a.JL,a.sg,a.u,x.P,Z.e,p.aw,p.X$,m.uH,m.BN],changeDetection:0}),o})();function nt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()),2&o&&(e.xp6(1),e.AsE(" ",e.lcZ(2,2,e.lcZ(3,4,"el"))," IVA ",e.lcZ(4,6,"es requerido"),". "))}function at(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"debe introducir solo n\xfameros"),". "))}function it(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,nt,5,8,"span",27),e.YNc(2,at,3,3,"span",27),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formIVA.controls.iva.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.formIVA.controls.iva.hasError("pattern"))}}function rt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.ALo(4,"translate"),e.qZA()),2&o&&(e.xp6(1),e.AsE(" ",e.lcZ(2,2,e.lcZ(3,4,"el"))," IVA ",e.lcZ(4,6,"es requerido"),". "))}function lt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"debe introducir solo n\xfameros"),". "))}function st(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,rt,5,8,"span",27),e.YNc(2,lt,3,3,"span",27),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formIVA.controls.amount.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.formIVA.controls.amount.hasError("pattern"))}}function ct(o,i){if(1&o&&(e.TgZ(0,"option",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.text)," ")}}function ut(o,i){if(1&o&&(e.TgZ(0,"option",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.text)," ")}}const O=function(o,i){return{"is-invalid":o,"is-valid":i}};function dt(o,i){if(1&o&&(e.TgZ(0,"div",18)(1,"label",19),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",29),e.YNc(5,ut,3,4,"option",24),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"C\xf3digo de tarifa"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(5,O,t.formIVA.controls.code.touched&&t.formIVA.controls.code.errors,t.formIVA.controls.code.valid)),e.xp6(1),e.Q6J("ngForOf",t.ratesCodeChoices)}}function pt(o,i){if(1&o&&(e.TgZ(0,"option",28),e._uU(1),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function mt(o,i){if(1&o&&(e.TgZ(0,"div",18)(1,"label",19),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",30),e.YNc(5,pt,2,2,"option",24),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"Factor IVA"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(5,O,t.formIVA.controls.factor.touched&&t.formIVA.controls.factor.errors,t.formIVA.controls.factor.valid)),e.xp6(1),e.Q6J("ngForOf",t.factors)}}function gt(o,i){if(1&o&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"label",19),e._uU(4," I.V.A: "),e.qZA(),e._UZ(5,"input",20),e.YNc(6,it,3,2,"div",21),e.qZA(),e.TgZ(7,"div",18)(8,"label",19),e._uU(9),e.ALo(10,"translate"),e.qZA(),e._UZ(11,"input",22),e.YNc(12,st,3,2,"div",21),e.qZA()(),e.TgZ(13,"div",18)(14,"label",19),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"select",23),e.YNc(18,ct,3,4,"option",24),e.qZA()(),e.YNc(19,dt,6,8,"div",25),e.YNc(20,mt,6,8,"div",25),e.qZA()),2&o){const t=e.oxw();e.Q6J("formGroup",t.formIVA),e.xp6(5),e.Q6J("ngClass",e.WLB(15,O,t.formIVA.controls.iva.touched&&t.formIVA.controls.iva.errors,t.formIVA.controls.iva.valid)),e.xp6(1),e.Q6J("ngIf",t.formIVA.controls.iva.touched&&t.formIVA.controls.iva.errors),e.xp6(3),e.hij(" ",e.lcZ(10,11,"Monto I.V.A"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(18,O,t.formIVA.controls.amount.touched&&t.formIVA.controls.amount.errors,t.formIVA.controls.amount.valid)),e.xp6(1),e.Q6J("ngIf",t.formIVA.controls.amount.touched&&t.formIVA.controls.amount.errors),e.xp6(3),e.hij(" ",e.lcZ(16,13,"Tipo de tarifa"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(21,O,t.formIVA.controls.type.touched&&t.formIVA.controls.type.errors,t.formIVA.controls.type.valid)),e.xp6(1),e.Q6J("ngForOf",t.taxesCodeChoices),e.xp6(1),e.Q6J("ngIf","01"===t.formIVA.controls.type.value||"06"===t.formIVA.controls.type.value),e.xp6(1),e.Q6J("ngIf","07"===t.formIVA.controls.type.value)}}function ht(o,i){if(1&o&&(e.TgZ(0,"option",28),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.text)," ")}}function _t(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"El motivo de exoneraci\xf3n es requerido")," "))}function bt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,_t,3,3,"span",27),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.motive.hasError("required"))}}function ft(o,i){if(1&o&&(e.TgZ(0,"div",18)(1,"label",19),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",41),e.YNc(5,ht,3,4,"option",24),e.qZA(),e.YNc(6,bt,2,1,"div",21),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,4,"Motivo de exoneraci\xf3n"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(6,O,t.formExoneration.controls.motive.touched&&t.formExoneration.controls.motive.errors,t.formExoneration.controls.motive.valid)),e.xp6(1),e.Q6J("ngForOf",t.motives),e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.motive.touched&&t.formExoneration.controls.motive.errors)}}function vt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"La instituci\xf3n es requerida")," "))}function Ct(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,vt,3,3,"span",27),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.nombreInstitucion.hasError("required"))}}function xt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"La instituci\xf3n es requerida")," "))}function Zt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,xt,3,3,"span",27),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.porcentajeExoneracion.hasError("required"))}}function At(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"La instituci\xf3n es requerida")," "))}function Tt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,At,3,3,"span",27),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.amount.hasError("required"))}}function Ot(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.enableExoneration())}),e._UZ(2,"input",32),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"app-exoneration-search",33),e.NdJ("exonerationFounded",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.getExonerationFounded(r))}),e.qZA(),e.TgZ(7,"div",34)(8,"span"),e._uU(9),e.ALo(10,"titlecase"),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",35),e._UZ(13,"input",36,37),e.qZA()(),e.YNc(15,ft,7,9,"div",25),e.TgZ(16,"div",18)(17,"label",19),e._uU(18),e.ALo(19,"translate"),e.qZA(),e._UZ(20,"input",38),e.YNc(21,Ct,2,1,"div",21),e.qZA(),e.TgZ(22,"div",39)(23,"div",18)(24,"label",19),e._uU(25),e.ALo(26,"translate"),e.qZA(),e._UZ(27,"input",40),e.YNc(28,Zt,2,1,"div",21),e.qZA(),e.TgZ(29,"div",18)(30,"label",19),e._uU(31),e.ALo(32,"translate"),e.qZA(),e._UZ(33,"input",22),e.YNc(34,Tt,2,1,"div",21),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.formExoneration),e.xp6(2),e.Q6J("checked",t.exenerationStatus),e.xp6(2),e.hij(" ",e.lcZ(5,16,"Habilitar exoneraci\xf3n I.V.A")," "),e.xp6(2),e.Q6J("readonly",!t.exenerationStatus)("document",t.formExoneration.controls.numeroDocumento.value),e.xp6(3),e.hij("",e.lcZ(10,18,e.lcZ(11,20,"Fecha de exoneraci\xf3n")),":"),e.xp6(6),e.Q6J("ngIf",!1),e.xp6(3),e.hij(" ",e.lcZ(19,22,"Instituci\xf3n emisora de exoneraci\xf3n"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(28,O,t.formExoneration.controls.nombreInstitucion.touched&&t.formExoneration.controls.nombreInstitucion.errors,t.formExoneration.controls.nombreInstitucion.valid)),e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.nombreInstitucion.touched&&t.formExoneration.controls.nombreInstitucion.errors),e.xp6(4),e.hij(" ",e.lcZ(26,24,"Exoneraci\xf3n (por puntos)"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(31,O,t.formExoneration.controls.porcentajeExoneracion.touched&&t.formExoneration.controls.porcentajeExoneracion.errors,t.formExoneration.controls.porcentajeExoneracion.valid)),e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.porcentajeExoneracion.touched&&t.formExoneration.controls.porcentajeExoneracion.errors),e.xp6(3),e.hij(" ",e.lcZ(32,26,"Monto exoneraci\xf3n"),": "),e.xp6(2),e.Q6J("ngClass",e.WLB(34,O,t.formExoneration.controls.amount.touched&&t.formExoneration.controls.amount.errors,t.formExoneration.controls.amount.valid)),e.xp6(1),e.Q6J("ngIf",t.formExoneration.controls.amount.touched&&t.formExoneration.controls.amount.errors)}}function qt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.activeModal.close("remove"))}),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()}2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"eliminar"))," "))}function yt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editExoneration())}),e.ALo(1,"translate"),e._uU(2),e.ALo(3,"capitalize"),e.ALo(4,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.formExoneration.invalid||t.formExoneration.disabled)("disableTooltip",t.formExoneration.valid)("ngbTooltip",e.lcZ(1,4,"Debe poseer una exoneraci\xf3n v\xe1lida")),e.xp6(2),e.hij(" ",e.lcZ(3,6,e.lcZ(4,8,"guardar"))," ")}}let Mt=(()=>{class o extends T.u{constructor(t,n,r,l,h,L){super(),this._authenticatedUserService=t,this._utilService=n,this._toastService=r,this._businessService=l,this._cdRef=h,this.activeModal=L,this.faCircleXmark=N.WA2,this.ratesCodeChoices=g.wv,this.taxesCodeChoices=g.lU.filter(U=>["01","06","07"].includes(U.value)),this.factors=["1,058","1,050","1,044","1,065"],this.motives=[],this.active=1,this.exenerationStatus=!1,this.formIVA=new a.nJ({iva:new a.p4({value:0,disabled:!1},[a.kI.required,a.kI.pattern(f.qC)]),amount:new a.p4({value:0,disabled:!1},[a.kI.required]),type:new a.p4({value:"01",disabled:!1}),code:new a.p4({value:"08",disabled:!1}),factor:new a.p4({value:"1,058",disabled:!1})}),this.formExoneration=new a.nJ({numeroDocumento:new a.p4({value:null,disabled:!0},[a.kI.required]),fechaEmision:new a.p4({value:null,disabled:!0},[a.kI.required]),motive:new a.p4({value:null,disabled:!0}),tipoDocumento:new a.p4({value:null,disabled:!0}),nombreInstitucion:new a.p4({value:null,disabled:!0},[a.kI.required]),porcentajeExoneracion:new a.p4({value:0,disabled:!0},[a.kI.required]),amount:new a.p4({value:0,disabled:!0},[a.kI.required])})}set exoneration(t){t?.numeroDocumento&&this.formExoneration.patchValue({numeroDocumento:t?.numeroDocumento,fechaEmision:t?.fechaEmision,nombreInstitucion:t?.nombreInstitucion,porcentajeExoneracion:t?.porcentajeExoneracion,amount:t?.amount,tipoDocumento:t?.tipoDocumento})}getBusinessInUse(){this._businessService.get(this._authenticatedUserService.getBusiness()).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.business=t}})}checkExoneration(t){return this.business?.identification?.number===t?.identificacion&&t?.poseeCabys&&t?.cabys.includes(this.cabys)}editExoneration(){this.activeModal.close({...this.formExoneration.value,fechaEmision:new Date(this.formExoneration.get("fechaEmision")?.value?.year,this.formExoneration.get("fechaEmision")?.value?.month-1,this.formExoneration.get("fechaEmision")?.value?.day).toISOString()})}enableExoneration(){this.exenerationStatus=!this.exenerationStatus,this.exenerationStatus?this.formExoneration.enable():this.formExoneration.disable()}getExonerationFounded(t){t?this.checkExoneration(t)?this.formExoneration.patchValue({numeroDocumento:t?.numeroDocumento,fechaEmision:this._utilService.parseDate(t?.fechaEmision),nombreInstitucion:t?.nombreInstitucion,porcentajeExoneracion:t?.porcentajeExoneracion,tipoDocumento:t?.tipoDocumento,amount:Number(this.subtotal*t?.porcentajeExoneracion/100)}):this.checkExoneration(t)||this._toastService.showToast((0,v.J)("Este documento no es aplicable a esta factura"),C.p.DANGER):this.formExoneration.reset()}ngOnInit(){this.getBusinessInUse(),this.formIVA.patchValue({iva:this.tax,amount:Number(this.subtotal*this.tax/100),type:13===this.tax?"01":"06",code:13===this.tax?"08":"01"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(j.G),e.Y36(V.F),e.Y36(C.k),e.Y36(F.m),e.Y36(e.sBO),e.Y36(b.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-exoneration"]],inputs:{cabys:"cabys",subtotal:"subtotal",tax:"tax",exoneration:"exoneration"},standalone:!0,features:[e._Bn([F.m]),e.qOj,e.jDz],decls:29,vars:23,consts:[[1,"modal-header"],[1,"modal-title","d-flex","align-items-center"],[1,"me-2",3,"icon"],[1,"component-title"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body","d-flex","flex-column","justify-content-start","gap-3","p-3"],["ngbNav","",1,"nav-tabs",3,"activeId","activeIdChange"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["class","btn btn-danger","type","button",3,"click",4,"ngIf"],["class","btn btn-primary","type","button","placement","top","container","body",3,"disabled","disableTooltip","ngbTooltip","click",4,"ngIf"],[1,"d-flex","flex-column","gap-3",3,"formGroup"],[1,"d-flex","justify-content-start","align-items-start","gap-3"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["formControlName","iva","type","text","readonly","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["formControlName","amount","type","text","readonly","",1,"form-control",3,"ngClass"],["formControlName","type",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","d-flex flex-column form-group w-100",4,"ngIf"],[1,"invalid-feedback"],[4,"ngIf"],[3,"value"],["formControlName","code",1,"form-control",3,"ngClass"],["formControlName","factor",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-start","align-items-center","gap-3","w-100","cursor-pointer",3,"click"],["type","checkbox",3,"checked"],[3,"readonly","document","exonerationFounded"],[1,"w-100","d-flex","flex-column","gap-1","w-100"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","formControlName","fechaEmision","ngbDatepicker","","readonly","",1,"form-control"],["d","ngbDatepicker"],["formControlName","nombreInstitucion","type","text","readonly","",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-start","gap-3"],["formControlName","porcentajeExoneracion","type","text","readonly","",1,"form-control",3,"ngClass"],["formControlName","motive",1,"form-control",3,"ngClass"],["type","button",1,"btn","btn-danger",3,"click"],["type","button","placement","top","container","body",1,"btn","btn-primary",3,"disabled","disableTooltip","ngbTooltip","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._UZ(2,"fa-icon",2),e.TgZ(3,"span",3),e._uU(4),e.ALo(5,"capitalize"),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"button",4),e.NdJ("click",function(){return n.activeModal.close("close")}),e.qZA()(),e.TgZ(8,"div",5)(9,"ul",6,7),e.NdJ("activeIdChange",function(l){return n.active=l}),e.TgZ(11,"li",8)(12,"button",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.YNc(15,gt,21,24,"ng-template",10),e.qZA(),e.TgZ(16,"li",8)(17,"button",9),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.YNc(20,Ot,35,37,"ng-template",10),e.qZA()(),e._UZ(21,"div",11),e.qZA(),e.TgZ(22,"div",12)(23,"button",13),e.NdJ("click",function(){return n.activeModal.close("close")}),e._uU(24),e.ALo(25,"capitalize"),e.ALo(26,"translate"),e.qZA(),e.YNc(27,qt,4,5,"button",14),e.YNc(28,yt,5,10,"button",15),e.qZA()),2&t){const r=e.MAs(10);e.xp6(2),e.Q6J("icon",n.faCircleXmark),e.xp6(2),e.hij(" ",e.lcZ(5,11,e.lcZ(6,13,"impuesto al valor agregado"))," "),e.xp6(5),e.Q6J("activeId",n.active),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(2),e.Oqu(e.lcZ(14,15,"Calcular IVA")),e.xp6(3),e.Q6J("ngbNavItem",2),e.xp6(2),e.Oqu(e.lcZ(19,17,"Exonerar IVA")),e.xp6(3),e.Q6J("ngbNavOutlet",r),e.xp6(3),e.hij(" ",e.lcZ(25,19,e.lcZ(26,21,"cerrar"))," "),e.xp6(3),e.Q6J("ngIf",n.formExoneration.controls.numeroDocumento.value&&2===n.active),e.xp6(1),e.Q6J("ngIf",n.formExoneration.controls.numeroDocumento.value&&2===n.active)}},dependencies:[c.ez,c.mk,c.sg,c.O5,c.rS,x.P,Z.e,m.uH,m.BN,p.aw,p.X$,a.UX,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.sg,a.u,b.nv,b.Pz,b.Fh,b.uN,b.Dy,b.J4,ot,b._L],changeDetection:0}),o})();var Pt=u(2073),G=u(1908);function Lt(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"td")(10,"div",3)(11,"fa-icon",4),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.updateDiscount(l))}),e.ALo(12,"capitalize"),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"fa-icon",4),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.removeDiscount(null==l?null:l.index))}),e.ALo(15,"capitalize"),e.ALo(16,"translate"),e.qZA()()()()}if(2&o){const t=i.$implicit,n=i.index,r=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(3),e.Oqu(null==t?null:t.amount),e.xp6(3),e.Oqu(null==t?null:t.nature),e.xp6(3),e.Q6J("icon",r.faPencil)("ngbTooltip",e.lcZ(12,7,e.lcZ(13,9,"editar descuento"))),e.xp6(3),e.Q6J("icon",r.faTrashCan)("ngbTooltip",e.lcZ(15,11,e.lcZ(16,13,"eliminar descuento")))}}let Ft=(()=>{class o{constructor(){this.faTrashCan=_.Vui,this.faPencil=_.TzT,this.elements=(0,e.tdS)([]),this.viewDiscount=new e.vpe,this.indexToRemove=new e.vpe}set discounts(t){t&&this.elements.set([...t])}removeDiscount(t){this.indexToRemove.emit(t)}updateDiscount(t){this.viewDiscount.emit(t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-discount-table"]],inputs:{discounts:"discounts"},outputs:{viewDiscount:"viewDiscount",indexToRemove:"indexToRemove"},standalone:!0,features:[e.jDz],decls:16,vars:11,consts:[[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"icons-table-container"],["placement","left",3,"icon","ngbTooltip","click"]],template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",1),e._uU(6),e.ALo(7,"uppercase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",1),e._uU(10),e.ALo(11,"uppercase"),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"th",1),e.qZA()(),e.TgZ(14,"tbody"),e.YNc(15,Lt,17,15,"tr",2),e.qZA()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,3,e.lcZ(8,5,"monto"))),e.xp6(4),e.Oqu(e.lcZ(11,7,e.lcZ(12,9,"naturaleza"))),e.xp6(5),e.Q6J("ngForOf",n.elements()))},dependencies:[c.ez,c.sg,c.gd,m.uH,m.BN,p.aw,p.X$,b._L,x.P,Z.e],changeDetection:0}),o})();function wt(o,i){if(1&o&&(e.TgZ(0,"option",25),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("value",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,e.lcZ(3,4,null==t?null:t.text))," ")}}function It(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el tipo de descuento es requerido")),". "))}function Jt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,It,4,5,"span",27),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.type.hasError("required"))}}function Nt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la naturaleza del descuento es requerido")),". "))}function Et(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,Nt,4,5,"span",27),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.nature.hasError("required"))}}function kt(o,i){1&o&&(e.TgZ(0,"label",7),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"porciento")),": "))}function Ut(o,i){1&o&&(e.TgZ(0,"label",7),e._uU(1),e.ALo(2,"titlecase"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"monto")),": "))}const I=function(o,i){return{"is-invalid":o,"is-valid":i}};function Dt(o,i){if(1&o&&e._UZ(0,"input",28),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(1,I,t.form.controls.amount.touched&&t.form.controls.amount.errors,t.form.controls.amount.valid))}}function St(o,i){if(1&o&&e._UZ(0,"input",29),2&o){const t=e.oxw();e.Q6J("ngClass",e.WLB(1,I,t.form.controls.amount.touched&&t.form.controls.amount.errors,t.form.controls.amount.valid))}}function Qt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el monto del descuento es requerido")),". "))}function jt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el porcentaje del descuento es requerido")),". "))}function Yt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe introducir solo n\xfameros")),". "))}function zt(o,i){if(1&o&&(e.TgZ(0,"div",26),e.YNc(1,Qt,4,5,"span",27),e.YNc(2,jt,4,5,"span",27),e.YNc(3,Yt,4,5,"span",27),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.amount.hasError("required")&&!t.form.controls.isPercent.value),e.xp6(1),e.Q6J("ngIf",t.form.controls.amount.hasError("required")&&t.form.controls.isPercent.value),e.xp6(1),e.Q6J("ngIf",t.form.controls.amount.hasError("pattern"))}}let Rt=(()=>{class o{constructor(t,n){this._toastService=t,this.activeModal=n,this.faTag=_.LEN,this.discountTypes=g.P$,this.form=new a.nJ({index:new a.p4({value:null,disabled:!1}),type:new a.p4({value:"99",disabled:!1},[a.kI.required]),nature:new a.p4({value:null,disabled:!1},[a.kI.required]),amount:new a.p4({value:null,disabled:!1},[a.kI.required,a.kI.pattern(f.qC)]),isPercent:new a.p4({value:!0,disabled:!1},[a.kI.required])}),this.discounts=[],this.totalDiscount=0}addDiscount(){this.totalDiscount=this.discounts.reduce((n,r)=>n+r.amount,0);let t=Number(this.form.get("amount").value);if(this.form.get("isPercent").value&&(t=Number(t*this.subtotal)/100),this.totalDiscount+t<this.subtotal&&this.discounts?.length<5){const n=this.discounts.findIndex(r=>r?.index===this.form.get("index").value);n>-1?this.discounts.splice(n,1,{index:this.form.get("index")?.value,amount:t,nature:this.form.get("nature")?.value,type:this.form.get("type")?.value}):this.discounts.push({index:(0,G.Z)(),amount:t,nature:this.form.get("nature")?.value,type:this.form.get("type")?.value}),this.form.reset({index:null,type:"99",nature:null,amount:null,isPercent:!0}),this.discounts=JSON.parse(JSON.stringify(this.discounts)),this.totalDiscount=this.discounts.reduce((r,l)=>r+l.amount,0)}else this._toastService.showToast("No puede agregar ma\u0301s descuentos",C.p.DANGER)}viewDiscount(t){this.form.patchValue({type:t?.type,nature:t?.nature,amount:t?.amount,isPercent:!1})}removeDiscount(t){this.discounts=this.discounts.filter(n=>n?.index!==t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.k),e.Y36(b.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-discount"]],inputs:{subtotal:"subtotal"},standalone:!0,features:[e.jDz],decls:71,vars:79,consts:[[1,"modal-header"],[1,"modal-title","d-flex","align-items-center"],[1,"me-2",3,"icon"],[1,"component-title"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body","d-flex","flex-column","justify-content-start","gap-3","p-3",3,"formGroup"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["formControlName","type",1,"form-control",3,"ngClass"],[3,"value",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","nature",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-start","align-items-center","gap-3"],[1,"d-flex","justify-content-start","align-items-center","gap-1"],["type","radio","formControlName","isPercent",3,"value"],["class","control-label mb-2",4,"ngIf"],["class","form-control","formControlName","amount","type","number","step","1","min","0","max","100",3,"ngClass",4,"ngIf"],["class","form-control","formControlName","amount","type","text",3,"ngClass",4,"ngIf"],[1,"d-flex","justify-content-end"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[3,"discounts","viewDiscount","indexToRemove"],[1,"d-flex","justify-content-end","align-items-center","gap-3"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button","placement","top","container","body",1,"btn","btn-primary",3,"ngbTooltip","disabled","click"],[3,"value"],[1,"invalid-feedback"],[4,"ngIf"],["formControlName","amount","type","number","step","1","min","0","max","100",1,"form-control",3,"ngClass"],["formControlName","amount","type","text",1,"form-control",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h5",1),e._UZ(2,"fa-icon",2),e.TgZ(3,"span",3),e._uU(4),e.ALo(5,"capitalize"),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"button",4),e.NdJ("click",function(){return n.activeModal.close("close")}),e.qZA()(),e.TgZ(8,"div",5)(9,"div",6)(10,"label",7),e._uU(11),e.ALo(12,"titlecase"),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"select",8),e.YNc(15,wt,4,6,"option",9),e.qZA(),e.YNc(16,Jt,2,1,"div",10),e.qZA(),e.TgZ(17,"div",6)(18,"label",7),e._uU(19),e.ALo(20,"titlecase"),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"textarea",11),e._uU(23,"    "),e.qZA(),e.YNc(24,Et,2,1,"div",10),e.qZA(),e.TgZ(25,"div",12)(26,"div",13)(27,"span"),e._uU(28),e.ALo(29,"capitalize"),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"label"),e._UZ(32,"input",14),e._uU(33),e.ALo(34,"titlecase"),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"label"),e._UZ(37,"input",14),e._uU(38),e.ALo(39,"titlecase"),e.ALo(40,"translate"),e.qZA()()(),e.TgZ(41,"div",6),e.YNc(42,kt,4,5,"label",15),e.YNc(43,Ut,4,5,"label",15),e.YNc(44,Dt,1,4,"input",16),e.YNc(45,St,1,4,"input",17),e.YNc(46,zt,4,3,"div",10),e.qZA(),e.TgZ(47,"div",18)(48,"button",19),e.NdJ("click",function(){return n.addDiscount()}),e._uU(49),e.ALo(50,"capitalize"),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"app-discount-table",20),e.NdJ("viewDiscount",function(l){return n.viewDiscount(l)})("indexToRemove",function(l){return n.removeDiscount(l)}),e.qZA(),e.TgZ(53,"div",21)(54,"span"),e._uU(55),e.ALo(56,"capitalize"),e.ALo(57,"translate"),e.qZA(),e.TgZ(58,"span"),e._uU(59),e.ALo(60,"currency"),e.qZA()()(),e.TgZ(61,"div",22)(62,"button",23),e.NdJ("click",function(){return n.activeModal.close("close")}),e._uU(63),e.ALo(64,"capitalize"),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"button",24),e.NdJ("click",function(){return n.activeModal.close(n.discounts)}),e.ALo(67,"translate"),e._uU(68),e.ALo(69,"capitalize"),e.ALo(70,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("icon",n.faTag),e.xp6(2),e.hij(" ",e.lcZ(5,29,e.lcZ(6,31,"descuentos (m\xe1ximo 5 descuentos)"))," "),e.xp6(4),e.Q6J("formGroup",n.form),e.xp6(3),e.hij(" ",e.lcZ(12,33,e.lcZ(13,35,"descuento")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(73,I,n.form.controls.type.touched&&n.form.controls.type.errors,n.form.controls.type.valid)),e.xp6(1),e.Q6J("ngForOf",n.discountTypes),e.xp6(1),e.Q6J("ngIf",n.form.controls.type.touched&&n.form.controls.type.errors),e.xp6(3),e.hij(" ",e.lcZ(20,37,e.lcZ(21,39,"naturaleza")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(76,I,n.form.controls.nature.touched&&n.form.controls.nature.errors,n.form.controls.nature.valid)),e.xp6(2),e.Q6J("ngIf",n.form.controls.nature.touched&&n.form.controls.nature.errors),e.xp6(4),e.hij("",e.lcZ(29,41,e.lcZ(30,43,"El valor del descuento est\xe1 representado en")),":"),e.xp6(4),e.Q6J("value",!0),e.xp6(1),e.hij(" ",e.lcZ(34,45,e.lcZ(35,47,"porciento"))," "),e.xp6(4),e.Q6J("value",!1),e.xp6(1),e.hij(" ",e.lcZ(39,49,e.lcZ(40,51,"monto"))," "),e.xp6(4),e.Q6J("ngIf",n.form.controls.isPercent.value),e.xp6(1),e.Q6J("ngIf",!n.form.controls.isPercent.value),e.xp6(1),e.Q6J("ngIf",n.form.controls.isPercent.value),e.xp6(1),e.Q6J("ngIf",!n.form.controls.isPercent.value),e.xp6(1),e.Q6J("ngIf",n.form.controls.amount.touched&&n.form.controls.amount.errors),e.xp6(2),e.Q6J("disabled",n.form.invalid),e.xp6(1),e.hij(" ",e.lcZ(50,53,e.lcZ(51,55,"a\xf1adir descuento"))," "),e.xp6(3),e.Q6J("discounts",n.discounts),e.xp6(3),e.hij("",e.lcZ(56,57,e.lcZ(57,59,"total de descuento")),":"),e.xp6(4),e.Oqu(e.lcZ(60,61,n.totalDiscount)),e.xp6(4),e.hij(" ",e.lcZ(64,63,e.lcZ(65,65,"cerrar"))," "),e.xp6(3),e.Q6J("ngbTooltip",e.lcZ(67,67,"Debe agregar al menos un descuento"))("disabled",0===(null==n.discounts?null:n.discounts.length)),e.xp6(2),e.hij(" ",e.lcZ(69,69,e.lcZ(70,71,"guardar"))," "))},dependencies:[c.ez,c.mk,c.sg,c.O5,c.rS,c.H9,x.P,Z.e,m.uH,m.BN,p.aw,p.X$,b._L,a.u5,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a._,a.JJ,a.JL,a.qQ,a.Fd,a.UX,a.sg,a.u,Ft],changeDetection:0}),o})();function Vt(o,i){if(1&o&&(e.TgZ(0,"option",30),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.name)," ")}}function Bt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe escoger un producto"))," "))}function Xt(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,Bt,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.searchProduct.hasError("required"))}}function Gt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el c\xf3digo es requerido"))," "))}function $t(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,Gt,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.code.hasError("required"))}}function Ht(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la unidad es requerida"))," "))}function Wt(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,Ht,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.unit_measurement.hasError("required"))}}function Kt(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la cantidad es requerida"))," "))}function eo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe introducir solo n\xfameros")),". "))}function to(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,Kt,4,5,"span",32),e.YNc(2,eo,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.quantity.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.quantity.hasError("pattern"))}}function oo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el precio es requerido"))," "))}function no(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe introducir solo n\xfameros")),". "))}function ao(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,oo,4,5,"span",32),e.YNc(2,no,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.unit_price.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.unit_price.hasError("pattern"))}}function io(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el descuento es requerido")),". "))}function ro(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe introducir solo n\xfameros")),". "))}function lo(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,io,4,5,"span",32),e.YNc(2,ro,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.discount.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.discount.hasError("pattern"))}}function so(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe introducir solo n\xfameros")),". "))}function co(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,so,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.other_taxes.hasError("pattern"))}}function uo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el total es requerido")),". "))}function po(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"debe introducir solo n\xfameros")),". "))}function mo(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,uo,4,5,"span",32),e.YNc(2,po,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.line_total_amount.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.line_total_amount.hasError("pattern"))}}function go(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"la descripci\xf3n es requerido")),". "))}function ho(o,i){if(1&o&&(e.TgZ(0,"div",31),e.YNc(1,go,4,5,"span",32),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.detailForm.controls.detail.hasError("required"))}}const A=function(o,i){return{"is-invalid":o,"is-valid":i}},_o=function(o){return{percentage:o}};let $=(()=>{class o extends T.u{constructor(t,n,r){super(),this._productService=t,this._cdRef=n,this._modalService=r,this.taxes={agregateValueTax:0,exciseTax:0,singleFuelTax:0,specificAlcoholicBeveragesTax:0,SpecificNonAlcoholicBeveragesToiletSoapsTax:0,tobaccoTax:0,specialCalculationTax:0,regimeUsedGoodsFactorTax:0,specificCementTax:0,othersTax:0},this.faPencil=_.TzT,this.faPlus=_.r8p,this.units=g.uo.map(l=>({name:l.text,uuid:l.value})),this.products=[],this.lineToAdd=void 0,this.searchProduct=new a.p4({value:null,disabled:!1}),this.detailForm=new a.nJ({code:new a.p4({value:null,disabled:!1},[a.kI.required]),unit_measurement:new a.p4({value:null,disabled:!1},[a.kI.required]),quantity:new a.p4({value:null,disabled:!1},[a.kI.required,a.kI.pattern(f.qC)]),unit_price:new a.p4({value:null,disabled:!1},[a.kI.required,a.kI.pattern(f.qC)]),calculatedTax:new a.p4({value:0,disabled:!1}),subtotal:new a.p4({value:null,disabled:!1}),exoneration:new a.p4({value:null,disabled:!1}),discounts:new a.p4({value:null,disabled:!1}),tax_base:new a.p4({value:null,disabled:!1},[a.kI.pattern(f.qC)]),detail:new a.p4({value:null,disabled:!1},[a.kI.required]),other_taxes:new a.p4({value:0,disabled:!1},[a.kI.pattern(f.qC)]),discount:new a.p4({value:0,disabled:!1},[a.kI.pattern(f.qC)]),total_amount:new a.p4({value:null,disabled:!1},[a.kI.pattern(f.qC)]),line_total_amount:new a.p4({value:null,disabled:!1},[a.kI.pattern(f.qC)])}),this.bills=new e.vpe}getProducts(){this._productService.getElements({limit:1e3}).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.products=t?.results,this._cdRef.detectChanges()}})}reactToValueChanges(){this.detailForm.valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{t?.unit_price?(t.line_total_amount=this.calcularCostoTotal(t.unit_price,t?.quantity,t?.calculatedTax,t?.other_taxes,t?.discount),this.detailForm.patchValue({unit_price:Number(t.unit_price),quantity:Number(t.quantity),subtotal:Number(t?.unit_price*t?.quantity)-Number(t?.discount),total_amount:Number(t?.unit_price*t?.quantity),line_total_amount:t?.line_total_amount},{emitEvent:!1})):t.total_amount=0}}),this.searchProduct.valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{const n=t?.taxes?.filter(r=>r?.code===g.GW.CABYS).map(r=>r?.cabys_tax_id)[0];this.detailForm.patchValue({code:t?.codes?.filter(r=>r?.type===g.GW.CABYS).map(r=>r?.code)[0],tax_base:n,calculatedTax:n,detail:t?.description})}})}calcularCostoTotal(t,n=1,r=0,l=0,h=0){return Math.round(100*(n*t*(1+(r+l)/100)-h))/100}getTaxesCode(t){switch(t){case"agregateValueTax":return"01";case"exciseTax":return"02";case"singleFuelTax":return"03";case"specificAlcoholicBeveragesTax":return"04";case"SpecificNonAlcoholicBeveragesToiletSoapsTax":return"05";case"tobaccoTax":return"06";case"specialCalculationTax":return"07";case"regimeUsedGoodsFactorTax":return"08";case"specificCementTax":return"09";default:return"99"}}getTaxesKey(t){switch(t){case"01":return"agregateValueTax";case"02":return"exciseTax";case"03":return"singleFuelTax";case"04":return"specificAlcoholicBeveragesTax";case"05":return"SpecificNonAlcoholicBeveragesToiletSoapsTax";case"06":return"tobaccoTax";case"07":return"specialCalculationTax";case"08":return"regimeUsedGoodsFactorTax";case"09":return"specificCementTax";default:return"othersTax"}}transformTaxes(){const t=[];for(const n in this.taxes)Object.prototype.hasOwnProperty.call(this.taxes,n)&&0!==this.taxes[n]&&t.push({code:this.getTaxesCode(n),amount:this.taxes[n]});return t}parseTaxes(t){t.filter(n=>n?.amount>0).forEach(n=>{this.taxes[this.getTaxesKey(n?.code)]=n?.amount})}createProduct(){this._modalService.open(Ge.m,{size:"lg",backdrop:"static"}).result.then(n=>{this._productService.create(n).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{this.getProducts()}})})}openTaxesModal(){if(this.detailForm.value?.code){const t=this._modalService.open($e,{size:"md",backdrop:"static"});t.componentInstance.taxes=this.taxes,t.componentInstance.taxBase=this.detailForm.get("tax_base")?.value,t.result.then(n=>{if("string"!=typeof n){this.taxes=n;let r=0;for(const l in this.taxes)Object.prototype.hasOwnProperty.call(this.taxes,l)&&"agregateValueTax"!==l&&(r+=this.taxes[l]);this.detailForm.get("other_taxes")?.setValue(Number(r.toFixed(1)))}},n=>{console.log(n)})}}openExonerationModal(){if(this.detailForm.value?.code&&this.detailForm.value?.unit_price&&this.detailForm.value?.quantity){const t=this._modalService.open(Mt,{size:"md",backdrop:"static"});t.componentInstance.cabys=this.detailForm.value?.code,t.componentInstance.tax=this.detailForm.value?.tax_base,t.componentInstance.subtotal=this.detailForm.value?.subtotal,t.componentInstance.exoneration=this.detailForm.value?.exoneration,t.result.then(n=>{"string"!=typeof n?this.detailForm.patchValue({exoneration:n,calculatedTax:Number(this.detailForm.get("tax_base").value)-n?.porcentajeExoneracion}):"remove"===n&&this.detailForm.patchValue({exoneration:null,calculatedTax:this.detailForm.get("tax_base").value})},n=>{console.log(n)})}}openDiscountModal(){if(this.detailForm.value?.code&&this.detailForm.value?.unit_price&&this.detailForm.value?.quantity){const t=this._modalService.open(Rt,{size:"md",backdrop:"static"});t.componentInstance.subtotal=this.detailForm.value?.subtotal,t.result.then(n=>{"string"!=typeof n&&this.detailForm.patchValue({discounts:n,discount:n.reduce((r,l)=>r+l.amount,0)})},n=>{console.log(n)})}}clearLine(){this.taxes={agregateValueTax:0,exciseTax:0,singleFuelTax:0,specificAlcoholicBeveragesTax:0,SpecificNonAlcoholicBeveragesToiletSoapsTax:0,tobaccoTax:0,specialCalculationTax:0,regimeUsedGoodsFactorTax:0,specificCementTax:0,othersTax:0},this.detailForm.reset()}addLine(){this.lineToAdd={...this.detailForm.value,taxes:this.transformTaxes()},this.clearLine()}viewLine(t){this.parseTaxes(t?.taxes),this.detailForm.patchValue(t)}ngOnInit(){this.getProducts(),this.reactToValueChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(X.M),e.Y36(e.sBO),e.Y36(b.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-lines-details"]],outputs:{bills:"bills"},standalone:!0,features:[e._Bn([X.M]),e.qOj,e.jDz],decls:112,vars:154,consts:[[1,"d-flex","flex-column","gap-3","p-4","invoice-data-group",3,"formGroup"],[1,"d-flex","justify-content-start","align-items-start","gap-3"],[1,"d-flex","align-items-start","gap-3","form-group","flex-grow-1"],[1,"control-label","mt-2"],[1,"form-control",3,"ngClass","formControl"],[3,"ngValue",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"btn","btn-primary","d-flex","align-items-center","gap-2",3,"click"],[3,"icon"],[1,"d-flex","justify-content-between","align-items-start","gap-3"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["formControlName","code","type","text","readonly","",1,"form-control",3,"ngClass"],["formControlName","unit_measurement",3,"items","required","ngClass","itemIsTouched"],["formControlName","quantity","type","text",1,"form-control",3,"ngClass"],["formControlName","unit_price","type","text",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"control-label"],["placement","top",1,"d-flex","justify-content-between","align-items-center","gap-1","cursor-pointer",3,"disableTooltip","ngbTooltip","click"],["formControlName","calculatedTax","type","text","readonly","",1,"form-control",3,"ngClass","ngbTooltip","disableTooltip"],["formControlName","discount","type","text","readonly","",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-between","align-items-center","gap-1","cursor-pointer",3,"click"],[1,"cursor-pointer"],["formControlName","other_taxes","type","text",1,"form-control",3,"readonly","ngClass"],["formControlName","line_total_amount","type","text","readonly","",1,"form-control",3,"ngClass"],["formControlName","detail","type","text","readonly","",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-end","gap-3"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],[3,"addLine","viewLine","bills"],[3,"ngValue"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"capitalize"),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"select",4),e.YNc(8,Vt,3,4,"option",5),e.qZA(),e.YNc(9,Xt,2,1,"div",6),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.createProduct()}),e._UZ(11,"fa-icon",8),e._uU(12),e.ALo(13,"capitalize"),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"div",9)(16,"div",10)(17,"label",11),e._uU(18),e.ALo(19,"capitalize"),e.ALo(20,"translate"),e.qZA(),e._UZ(21,"input",12),e.YNc(22,$t,2,1,"div",6),e.qZA(),e.TgZ(23,"div",10)(24,"label",11),e._uU(25),e.ALo(26,"capitalize"),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"app-generic-filter-select",13),e.NdJ("itemIsTouched",function(){return n.detailForm.controls.unit_measurement.markAllAsTouched()}),e.qZA(),e.YNc(29,Wt,2,1,"div",6),e.qZA(),e.TgZ(30,"div",10)(31,"label",11),e._uU(32),e.ALo(33,"capitalize"),e.ALo(34,"translate"),e.qZA(),e._UZ(35,"input",14),e.YNc(36,to,3,2,"div",6),e.qZA(),e.TgZ(37,"div",10)(38,"label",11),e._uU(39),e.ALo(40,"capitalize"),e.ALo(41,"translate"),e.qZA(),e._UZ(42,"input",15),e.YNc(43,ao,3,2,"div",6),e.qZA()(),e.TgZ(44,"div",9)(45,"div",10)(46,"div",16)(47,"label",17),e._uU(48),e.ALo(49,"uppercase"),e.qZA(),e.TgZ(50,"div",18),e.NdJ("click",function(){return n.openExonerationModal()}),e.ALo(51,"translate"),e._UZ(52,"fa-icon",8),e.TgZ(53,"span"),e._uU(54),e.ALo(55,"titlecase"),e.ALo(56,"translate"),e.qZA()()(),e._UZ(57,"input",19),e.ALo(58,"translate"),e.qZA(),e.TgZ(59,"div",10)(60,"div",16)(61,"label",17),e._uU(62),e.ALo(63,"capitalize"),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"div",18),e.NdJ("click",function(){return n.openDiscountModal()}),e.ALo(66,"translate"),e._UZ(67,"fa-icon",8),e.TgZ(68,"span"),e._uU(69),e.ALo(70,"titlecase"),e.ALo(71,"translate"),e.qZA()()(),e._UZ(72,"input",20),e.YNc(73,lo,3,2,"div",6),e.qZA(),e.TgZ(74,"div",10)(75,"div",16)(76,"label",17),e._uU(77),e.ALo(78,"capitalize"),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"div",21),e.NdJ("click",function(){return n.openTaxesModal()}),e._UZ(81,"fa-icon",8),e.TgZ(82,"label",22),e._uU(83),e.ALo(84,"titlecase"),e.ALo(85,"translate"),e.qZA()()(),e._UZ(86,"input",23),e.YNc(87,co,2,1,"div",6),e.qZA(),e.TgZ(88,"div",10)(89,"label",11),e._uU(90),e.ALo(91,"capitalize"),e.ALo(92,"translate"),e.qZA(),e._UZ(93,"input",24),e.YNc(94,mo,3,2,"div",6),e.qZA()(),e.TgZ(95,"div",10)(96,"label",11),e._uU(97),e.ALo(98,"capitalize"),e.ALo(99,"translate"),e.qZA(),e._UZ(100,"textarea",25),e.YNc(101,ho,2,1,"div",6),e.qZA(),e.TgZ(102,"div",26)(103,"button",27),e.NdJ("click",function(){return n.clearLine()}),e._uU(104),e.ALo(105,"capitalize"),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"button",28),e.NdJ("click",function(){return n.addLine()}),e._uU(108),e.ALo(109,"capitalize"),e.ALo(110,"translate"),e.qZA()(),e.TgZ(111,"app-line-table",29),e.NdJ("viewLine",function(l){return n.viewLine(l)})("bills",function(l){return n.bills.emit(l)}),e.qZA()()),2&t&&(e.Q6J("formGroup",n.detailForm),e.xp6(4),e.hij(" ",e.lcZ(5,53,e.lcZ(6,55,"Productos")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(122,A,n.searchProduct.touched&&n.searchProduct.errors,n.searchProduct.valid))("formControl",n.searchProduct),e.xp6(1),e.Q6J("ngForOf",n.products),e.xp6(1),e.Q6J("ngIf",n.searchProduct.touched&&n.searchProduct.errors),e.xp6(2),e.Q6J("icon",n.faPlus),e.xp6(1),e.hij(" ",e.lcZ(13,57,e.lcZ(14,59,"crear producto"))," "),e.xp6(6),e.hij(" ",e.lcZ(19,61,e.lcZ(20,63,"c\xf3d. cabys")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(125,A,n.detailForm.controls.code.touched&&n.detailForm.controls.code.errors,n.detailForm.controls.code.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.code.touched&&n.detailForm.controls.code.errors),e.xp6(3),e.hij(" ",e.lcZ(26,65,e.lcZ(27,67,"unidad")),": "),e.xp6(3),e.Q6J("items",n.units)("required",!0)("ngClass",e.WLB(128,A,n.detailForm.controls.unit_measurement.touched&&n.detailForm.controls.unit_measurement.errors,n.detailForm.controls.unit_measurement.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.unit_measurement.touched&&n.detailForm.controls.unit_measurement.errors),e.xp6(3),e.hij(" ",e.lcZ(33,69,e.lcZ(34,71,"cantidad")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(131,A,n.detailForm.controls.quantity.touched&&n.detailForm.controls.quantity.errors,n.detailForm.controls.quantity.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.quantity.touched&&n.detailForm.controls.quantity.errors),e.xp6(3),e.hij(" ",e.lcZ(40,73,e.lcZ(41,75,"precio unitario")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(134,A,n.detailForm.controls.unit_price.touched&&n.detailForm.controls.unit_price.errors,n.detailForm.controls.unit_price.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.unit_price.touched&&n.detailForm.controls.unit_price.errors),e.xp6(5),e.hij(" ",e.lcZ(49,77,"iva"),"(%): "),e.xp6(2),e.Q6J("disableTooltip",n.detailForm.controls.unit_price.valid&&n.detailForm.controls.quantity.valid&&n.detailForm.controls.code.valid)("ngbTooltip",e.lcZ(51,79,"Debe introducir la cantidad, el precio unitario y un c\xf3digo CABYS v\xe1lido")),e.xp6(2),e.Q6J("icon",n.faPencil),e.xp6(2),e.Oqu(e.lcZ(55,81,e.lcZ(56,83,"editar"))),e.xp6(3),e.Q6J("ngClass",e.WLB(137,A,n.detailForm.controls.calculatedTax.touched&&n.detailForm.controls.calculatedTax.errors,n.detailForm.controls.calculatedTax.valid))("ngbTooltip",e.xi3(58,85,"exoneraci\xf3n aplicada",e.VKq(140,_o,null==n.detailForm.controls.exoneration.value?null:n.detailForm.controls.exoneration.value.porcentajeExoneracion)))("disableTooltip",n.detailForm.controls.calculatedTax.value===n.detailForm.controls.tax_base.value),e.xp6(5),e.hij(" ",e.lcZ(63,88,e.lcZ(64,90,"descuento")),": "),e.xp6(3),e.Q6J("disableTooltip",n.detailForm.controls.unit_price.valid&&n.detailForm.controls.quantity.valid&&n.detailForm.controls.code.valid)("ngbTooltip",e.lcZ(66,92,"Debe introducir la cantidad, el precio unitario y un c\xf3digo CABYS v\xe1lido")),e.xp6(2),e.Q6J("icon",n.faPencil),e.xp6(2),e.Oqu(e.lcZ(70,94,e.lcZ(71,96,"editar"))),e.xp6(3),e.Q6J("ngClass",e.WLB(142,A,n.detailForm.controls.discount.touched&&n.detailForm.controls.discount.errors,n.detailForm.controls.discount.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.discount.touched&&n.detailForm.controls.discount.errors),e.xp6(4),e.hij(" ",e.lcZ(78,98,e.lcZ(79,100,"otros impuestos")),"(%): "),e.xp6(4),e.Q6J("icon",n.faPencil),e.xp6(2),e.Oqu(e.lcZ(84,102,e.lcZ(85,104,"editar"))),e.xp6(3),e.Q6J("readonly",!0)("ngClass",e.WLB(145,A,n.detailForm.controls.other_taxes.touched&&n.detailForm.controls.other_taxes.errors,n.detailForm.controls.other_taxes.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.other_taxes.touched&&n.detailForm.controls.other_taxes.errors),e.xp6(3),e.hij(" ",e.lcZ(91,106,e.lcZ(92,108,"total")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(148,A,n.detailForm.controls.line_total_amount.touched&&n.detailForm.controls.line_total_amount.errors,n.detailForm.controls.line_total_amount.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.total_amount.touched&&n.detailForm.controls.line_total_amount.errors),e.xp6(3),e.hij(" ",e.lcZ(98,110,e.lcZ(99,112,"descripci\xf3n")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(151,A,n.detailForm.controls.detail.touched&&n.detailForm.controls.detail.errors,n.detailForm.controls.detail.valid)),e.xp6(1),e.Q6J("ngIf",n.detailForm.controls.detail.touched&&n.detailForm.controls.detail.errors),e.xp6(3),e.hij(" ",e.lcZ(105,114,e.lcZ(106,116,"limpiar l\xednea"))," "),e.xp6(3),e.Q6J("disabled",n.detailForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(109,118,e.lcZ(110,120,"agregar l\xednea"))," "),e.xp6(3),e.Q6J("addLine",n.lineToAdd))},dependencies:[c.ez,c.mk,c.sg,c.O5,c.gd,c.rS,x.P,Z.e,m.uH,m.BN,a.u5,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,Xe,a.UX,a.oH,a.sg,a.u,p.aw,p.X$,Pt.v,b._L],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.invoice-data-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 0 4px 1px #6161614d;-moz-box-shadow:0 0 4px 1px rgba(97,97,97,.3);-webkit-box-shadow:0 0 4px 1px rgba(97,97,97,.3)}"],changeDetection:0}),o})();var M=u(49);function bo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"span"),e._uU(5),e.qZA()(),e.TgZ(6,"td")(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"td")(10,"span"),e._uU(11),e.qZA()(),e.TgZ(12,"td")(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"td")(16,"span"),e._uU(17),e.qZA()(),e.TgZ(18,"td")(19,"div",3)(20,"fa-icon",4),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.updateCharge(l))}),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"fa-icon",4),e.NdJ("click",function(){const l=e.CHM(t).$implicit,h=e.oxw();return e.KtG(h.removeCharge(null==l?null:l.index))}),e.ALo(23,"translate"),e.qZA()()()()}if(2&o){const t=i.$implicit,n=i.index,r=e.oxw();e.xp6(2),e.Oqu(n+1),e.xp6(3),e.Oqu(null==t?null:t.type),e.xp6(3),e.Oqu(null==t?null:t.name),e.xp6(3),e.Oqu(null==t?null:t.amount),e.xp6(3),e.Oqu(null==t?null:t.percentage),e.xp6(3),e.Oqu(null==t?null:t.identity_number),e.xp6(3),e.Q6J("icon",r.faPencil)("ngbTooltip",e.lcZ(21,10,"Editar cargo")),e.xp6(2),e.Q6J("icon",r.faTrashCan)("ngbTooltip",e.lcZ(23,12,"Eliminar cargo"))}}let fo=(()=>{class o{constructor(t){this._cdRef=t,this.elements=[],this.faTrashCan=N.Vui,this.faPencil=_.TzT,this.viewCharge=new e.vpe,this.otherCharges=new e.vpe}set addCharge(t){if(t){const n=this.elements.findIndex(r=>r?.index===t?.index);n>-1?this.elements.splice(n,1,t):this.elements.push(t),this.otherCharges.emit(this.elements),this._cdRef.detectChanges()}}updateCharge(t){this.viewCharge.emit(t)}removeCharge(t){this.elements=this.elements.filter(n=>n?.index!==t),this._cdRef.detectChanges()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-other-charge-table"]],inputs:{addCharge:"addCharge"},outputs:{viewCharge:"viewCharge",otherCharges:"otherCharges"},standalone:!0,features:[e.jDz],decls:28,vars:26,consts:[[1,"table","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],[1,"icons-table-container"],["placement","left",3,"icon","ngbTooltip","click"]],template:function(t,n){1&t&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e._uU(4,"#"),e.qZA(),e.TgZ(5,"th",1),e._uU(6),e.ALo(7,"uppercase"),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"th",1),e._uU(10),e.ALo(11,"uppercase"),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"th",1),e._uU(14),e.ALo(15,"uppercase"),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"th",1),e._uU(18),e.ALo(19,"uppercase"),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"th",1),e._uU(22),e.ALo(23,"uppercase"),e.ALo(24,"translate"),e.qZA(),e._UZ(25,"th",1),e.qZA()(),e.TgZ(26,"tbody"),e.YNc(27,bo,24,14,"tr",2),e.qZA()()),2&t&&(e.xp6(6),e.Oqu(e.lcZ(7,6,e.lcZ(8,8,"tipo"))),e.xp6(4),e.Oqu(e.lcZ(11,10,e.lcZ(12,12,"nombre"))),e.xp6(4),e.Oqu(e.lcZ(15,14,e.lcZ(16,16,"monto"))),e.xp6(4),e.Oqu(e.lcZ(19,18,e.lcZ(20,20,"porcentaje"))),e.xp6(4),e.Oqu(e.lcZ(23,22,e.lcZ(24,24,"n\xfamero de identidad"))),e.xp6(5),e.Q6J("ngForOf",n.elements))},dependencies:[c.sg,p.aw,p.X$,c.gd,m.uH,m.BN,b._L],changeDetection:0}),o})();function vo(o,i){if(1&o&&(e.TgZ(0,"option",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.text)," ")}}function Co(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el tipo de documento es requerido"))," "))}function xo(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,Co,4,5,"span",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.otherChargesForm.controls.type.hasError("required"))}}function Zo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el porcentaje debe ser un valor num\xe9rico"))," "))}function Ao(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,Zo,4,5,"span",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.otherChargesForm.controls.percentage.hasError("pattern"))}}function To(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el monto del cargo es requerido"))," "))}function Oo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el monto debe ser un valor num\xe9rico"))," "))}function qo(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,To,4,5,"span",19),e.YNc(2,Oo,4,5,"span",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.otherChargesForm.controls.amount.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.otherChargesForm.controls.amount.hasError("pattern"))}}function yo(o,i){if(1&o&&(e.TgZ(0,"option",17),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=i.$implicit;e.Q6J("ngValue",null==t?null:t.value),e.xp6(1),e.hij(" ",e.lcZ(2,2,null==t?null:t.text)," ")}}function Mo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"el formato de identificaci\xf3n es incorrecto"))," "))}function Po(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,Mo,4,5,"span",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.otherChargesForm.controls.identity_number.hasError("pattern"))}}function Lo(o,i){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"capitalize"),e.ALo(3,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,"los detalles son requeridos")),". "))}function Fo(o,i){if(1&o&&(e.TgZ(0,"div",18),e.YNc(1,Lo,4,5,"span",19),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.otherChargesForm.controls.detail.hasError("required"))}}const P=function(o,i){return{"is-invalid":o,"is-valid":i}};let H=(()=>{class o extends T.u{constructor(){super(),this.identificationPlaceholder="X-XXXX-XXXX",this.documentTypes=g._B,this.identificationTypes=M.P,this.chargeToAdd=void 0,this.otherChargesForm=new a.nJ({index:new a.p4({value:null,disabled:!1}),type:new a.p4({value:null,disabled:!1},[a.kI.required]),identity_number:new a.p4({value:null,disabled:!1}),identity_type:new a.p4({value:M.d.FISICAS_NACIONALES,disabled:!1}),name:new a.p4({value:null,disabled:!1}),percentage:new a.p4({value:null,disabled:!1},[a.kI.pattern(f.qC)]),detail:new a.p4({value:null,disabled:!1},[a.kI.required]),amount:new a.p4({value:null,disabled:!1},[a.kI.required,a.kI.pattern(f.qC)])}),this.otherCharges=new e.vpe}subscribeIdentification(){this.otherChargesForm.valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{switch(this.otherChargesForm.get("identity_type").value){case M.d.FISICAS_NACIONALES:this.otherChargesForm.get("identity_number").clearValidators(),this.otherChargesForm.get("identity_number").setValidators([a.kI.required,a.kI.pattern(f.l)]),this.identificationPlaceholder="X-XXXX-XXXX";break;case M.d.DIMEX:this.otherChargesForm.get("identity_number").clearValidators(),this.otherChargesForm.get("identity_number").setValidators([a.kI.required,a.kI.pattern(f.q9)]),this.identificationPlaceholder="XXXX-XXXX-XXXX";break;case M.d.NITES_TRIBUTARIOS:this.otherChargesForm.get("identity_number").clearValidators(),this.otherChargesForm.get("identity_number").setValidators([a.kI.required,a.kI.pattern(f.Ms)]),this.identificationPlaceholder="XX-XXXX-XXXX";break;default:this.otherChargesForm.get("identity_number").clearValidators(),this.otherChargesForm.get("identity_number").setValidators([a.kI.required,a.kI.pattern(f.l)]),this.identificationPlaceholder="X-XXXX-XXXX"}}})}clearCharge(){this.otherChargesForm.reset()}addCharge(){const t=this.otherChargesForm?.value?.index??(0,G.Z)();this.chargeToAdd={...this.otherChargesForm.value,index:t},this.clearCharge()}viewCharge(t){this.otherChargesForm.patchValue(t)}ngOnInit(){this.subscribeIdentification()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-other-charges"]],outputs:{otherCharges:"otherCharges"},standalone:!0,features:[e.qOj,e.jDz],decls:62,vars:76,consts:[[1,"d-flex","flex-column","gap-3","p-4","invoice-data-group",3,"formGroup"],[1,"d-flex","justify-content-between","align-items-start","gap-3"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["formControlName","type",1,"form-control",3,"ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["formControlName","percentage","type","text",1,"form-control",3,"ngClass"],["formControlName","amount","type","text",1,"form-control",3,"ngClass"],["formControlName","identity_type",1,"form-control"],["formControlName","identity_number","type","text",1,"form-control",3,"placeholder","ngClass"],["formControlName","name","type","text",1,"form-control"],["formControlName","detail","type","text",1,"form-control",3,"ngClass"],[1,"d-flex","justify-content-end","gap-3"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],[3,"addCharge","viewCharge","otherCharges"],[3,"ngValue"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"capitalize"),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"select",4),e.YNc(8,vo,3,4,"option",5),e.qZA(),e.YNc(9,xo,2,1,"div",6),e.qZA(),e.TgZ(10,"div",2)(11,"label",3),e._uU(12),e.ALo(13,"capitalize"),e.ALo(14,"translate"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,Ao,2,1,"div",6),e.qZA(),e.TgZ(17,"div",2)(18,"label",3),e._uU(19),e.ALo(20,"capitalize"),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"input",8),e.YNc(23,qo,3,2,"div",6),e.qZA()(),e.TgZ(24,"div",1)(25,"div",2)(26,"label",3),e._uU(27),e.ALo(28,"capitalize"),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"select",9),e.YNc(31,yo,3,4,"option",5),e.qZA()(),e.TgZ(32,"div",2)(33,"label",3),e._uU(34),e.ALo(35,"capitalize"),e.ALo(36,"translate"),e.qZA(),e._UZ(37,"input",10),e.YNc(38,Po,2,1,"div",6),e.qZA(),e.TgZ(39,"div",2)(40,"label",3),e._uU(41),e.ALo(42,"capitalize"),e.ALo(43,"translate"),e.qZA(),e._UZ(44,"input",11),e.qZA()(),e.TgZ(45,"div",2)(46,"label",3),e._uU(47),e.ALo(48,"capitalize"),e.ALo(49,"translate"),e.qZA(),e._UZ(50,"textarea",12),e.YNc(51,Fo,2,1,"div",6),e.qZA(),e.TgZ(52,"div",13)(53,"button",14),e.NdJ("click",function(){return n.clearCharge()}),e._uU(54),e.ALo(55,"capitalize"),e.ALo(56,"translate"),e.qZA(),e.TgZ(57,"button",15),e.NdJ("click",function(){return n.addCharge()}),e._uU(58),e.ALo(59,"capitalize"),e.ALo(60,"translate"),e.qZA()(),e.TgZ(61,"app-other-charge-table",16),e.NdJ("viewCharge",function(l){return n.viewCharge(l)})("otherCharges",function(l){return n.otherCharges.emit(l)}),e.qZA()()),2&t&&(e.Q6J("formGroup",n.otherChargesForm),e.xp6(4),e.hij(" ",e.lcZ(5,25,e.lcZ(6,27,"tipo de documento")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(61,P,n.otherChargesForm.controls.type.touched&&n.otherChargesForm.controls.type.errors,n.otherChargesForm.controls.type.valid)),e.xp6(1),e.Q6J("ngForOf",n.documentTypes),e.xp6(1),e.Q6J("ngIf",n.otherChargesForm.controls.type.touched&&n.otherChargesForm.controls.type.errors),e.xp6(3),e.hij(" ",e.lcZ(13,29,e.lcZ(14,31,"porcentaje"))," %: "),e.xp6(3),e.Q6J("ngClass",e.WLB(64,P,n.otherChargesForm.controls.percentage.touched&&n.otherChargesForm.controls.percentage.errors,n.otherChargesForm.controls.percentage.valid)),e.xp6(1),e.Q6J("ngIf",n.otherChargesForm.controls.percentage.touched&&n.otherChargesForm.controls.percentage.errors),e.xp6(3),e.hij(" ",e.lcZ(20,33,e.lcZ(21,35,"monto del cargo")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(67,P,n.otherChargesForm.controls.amount.touched&&n.otherChargesForm.controls.amount.errors,n.otherChargesForm.controls.amount.valid)),e.xp6(1),e.Q6J("ngIf",n.otherChargesForm.controls.amount.touched&&n.otherChargesForm.controls.amount.errors),e.xp6(4),e.hij(" ",e.lcZ(28,37,e.lcZ(29,39,"tipo de identificaci\xf3n")),": "),e.xp6(4),e.Q6J("ngForOf",n.identificationTypes),e.xp6(3),e.hij(" ",e.lcZ(35,41,e.lcZ(36,43,"n\xfamero de identificaci\xf3n")),": "),e.xp6(3),e.Q6J("placeholder",n.identificationPlaceholder)("ngClass",e.WLB(70,P,n.otherChargesForm.controls.identity_number.touched&&n.otherChargesForm.controls.identity_number.errors,n.otherChargesForm.controls.identity_number.valid)),e.xp6(1),e.Q6J("ngIf",n.otherChargesForm.controls.identity_number.touched&&n.otherChargesForm.controls.identity_number.errors),e.xp6(3),e.hij(" ",e.lcZ(42,45,e.lcZ(43,47,"nombre del tercero")),": "),e.xp6(6),e.hij(" ",e.lcZ(48,49,e.lcZ(49,51,"detalles")),": "),e.xp6(3),e.Q6J("ngClass",e.WLB(73,P,n.otherChargesForm.controls.detail.touched&&n.otherChargesForm.controls.detail.errors,n.otherChargesForm.controls.detail.valid)),e.xp6(1),e.Q6J("ngIf",n.otherChargesForm.controls.detail.touched&&n.otherChargesForm.controls.detail.errors),e.xp6(3),e.hij(" ",e.lcZ(55,53,e.lcZ(56,55,"limpiar campos"))," "),e.xp6(3),e.Q6J("disabled",n.otherChargesForm.invalid),e.xp6(1),e.hij(" ",e.lcZ(59,57,e.lcZ(60,59,"guardar cargo"))," "),e.xp6(3),e.Q6J("addCharge",n.chargeToAdd))},dependencies:[c.ez,c.mk,c.sg,c.O5,x.P,Z.e,a.u5,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,fo,a.UX,a.sg,a.u,p.aw,p.X$],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.invoice-data-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 0 4px 1px #6161614d;-moz-box-shadow:0 0 4px 1px rgba(97,97,97,.3);-webkit-box-shadow:0 0 4px 1px rgba(97,97,97,.3)}"],changeDetection:0}),o})();var W=u(7456);const wo=["issuer"],Io=["receiver"],Jo=["lines"],No=["charges"],Eo=["notes"],ko=["attach"],Uo=["check"];function Do(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-issuer-data",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.issuerChanged(r))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.issuerForm.value)}}function So(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-receiver-data",9),e.NdJ("ngModelChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.receiverChanged(r))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("ngModel",t.receiverForm.value)}}function Qo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-lines-details",10),e.NdJ("bills",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.getBills(r))}),e.qZA()}}function jo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"app-other-charges",11),e.NdJ("otherCharges",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.getCharges(r))}),e.qZA()}}function Yo(o,i){if(1&o&&(e.TgZ(0,"div",12)(1,"div",13)(2,"label",14),e._uU(3),e.ALo(4,"titlecase"),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"textarea",15),e.qZA()()),2&o){const t=e.oxw();e.Q6J("formGroup",t.notesForm),e.xp6(3),e.hij(" ",e.lcZ(4,2,e.lcZ(5,4,"notas")),": ")}}function zo(o,i){if(1&o){const t=e.EpF();e.TgZ(0,"div",16)(1,"app-file-upload",17),e.NdJ("fileUploaded",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.onFileUploaded(r))}),e.qZA()()}}function Ro(o,i){}const Vo=[{path:"",component:(()=>{class o extends T.u{constructor(t,n,r,l,h){super(),this._invoiceService=t,this._toastService=n,this._translateService=r,this._activatedRoute=l,this._modal=h,this.editMode=!1,this.invoice=(0,e.tdS)(null),this.bills=[],this.otherCharges=[],this.steps=(0,e.tdS)([]),this.currentStep=(0,e.tdS)(s.ISSUER),this.disableNext=(0,e.tdS)(!0),this.disablePrev=(0,e.tdS)(!0),this.issuerForm=new a.nJ({type:new a.p4({value:null,disabled:!1},[a.kI.required]),currency:new a.p4({value:g.wA.USD,disabled:!1},[a.kI.required]),paymentMethod:new a.p4({value:g.hL.CASH,disabled:!1},[a.kI.required]),saleCondition:new a.p4({value:g.Xo.CASH,disabled:!1},[a.kI.required]),exchange:new a.p4({value:null,disabled:!1}),expireDate:new a.p4({value:null,disabled:!1}),orderNumber:new a.p4({value:null,disabled:!1}),internNumber:new a.p4({value:null,disabled:!1}),creditTerm:new a.p4({value:null,disabled:!1}),activity:new a.p4({value:null,disabled:!1},[a.kI.required]),commercialCode:new a.p4({value:null,disabled:!1},[a.kI.required]),businessId:new a.p4({value:null,disabled:!1},[a.kI.required]),salePointId:new a.p4({value:null,disabled:!1},[a.kI.required])}),this.receiverForm=new a.nJ({uuid:new a.p4({value:null,disabled:!1},[a.kI.required]),identificationNumber:new a.p4({value:null,disabled:!1},[a.kI.required]),identificationType:new a.p4({value:null,disabled:!1},[a.kI.required]),name:new a.p4({value:null,disabled:!1},[a.kI.required]),location:new a.p4({value:null,disabled:!1}),country:new a.p4({value:null,disabled:!1}),phone_number:new a.p4({value:null,disabled:!1},[a.kI.required]),receiver:new a.p4({value:null,disabled:!1}),internCode:new a.p4({value:null,disabled:!1}),emails:new a.vC([],[a.kI.minLength(1)]),courtesyEmails:new a.vC([])}),this.notesForm=new a.nJ({notas:new a.p4({value:null,disabled:!1}),total_services_taxed:new a.p4({value:"0.00000",disabled:!1}),total_exempt_services:new a.p4({value:"0.00000",disabled:!1}),total_exonerated_service:new a.p4({value:"0.00000",disabled:!1}),total_merchandise_taxed:new a.p4({value:"0.00000",disabled:!1}),total_exempt_merchandise:new a.p4({value:"0.00000",disabled:!1}),total_exonerated_merchandise:new a.p4({value:"0.00000",disabled:!1}),total_taxed:new a.p4({value:"0.00000",disabled:!1}),total_exempt:new a.p4({value:"0.00000",disabled:!1}),total_exonerated:new a.p4({value:"0.00000",disabled:!1}),total_sale:new a.p4({value:"0.00000",disabled:!1}),total_discount:new a.p4({value:"0.00000",disabled:!1}),total_net_sale:new a.p4({value:"0.00000",disabled:!1}),total_tax:new a.p4({value:"0.00000",disabled:!1}),total_vat_returned:new a.p4({value:"0.00000",disabled:!1}),total_other_charges:new a.p4({value:"0.00000",disabled:!1}),total:new a.p4({value:"0.00000",disabled:!1})})}updateForEdit(){this.issuerForm.patchValue({type:this.invoice()?.type,sale_condition:this.invoice()?.sale_condition,paymentMethod:this.invoice()?.payment_methods?.[0]?.code,commercialCode:this.invoice()?.commercial_code,creditTerm:this.invoice()?.credit_term}),this.receiverForm.patchValue({uuid:this.invoice()?.receiver?.uuid})}notesSubscription(){this.notesForm.valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{this.notesForm.valid&&this.disableNext.set(!1)}})}createDocument(){const t={activity_code:this.issuerForm.get("commercialCode").value,payment_methods:[this.issuerForm.get("paymentMethod").value],receiver:this.receiverForm.get("uuid").value,sale_condition:this.issuerForm.get("saleCondition").value,credit_term:this.issuerForm.get("creditTerm").value};if(this.editMode)this._invoiceService.editDocument(this.invoice()?.uuid,t).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:n=>{this.invoice.set(n),this.currentStep.set(s.LINES_DETAILS),this.disableNext.set(!0),this.disablePrev.set(!1)}});else{const n={type:this.issuerForm.get("type").value,issuer:this.issuerForm.get("salePointId").value,sale_condition:this.issuerForm.get("saleCondition").value,activity_code:this.issuerForm.get("commercialCode").value,credit_term:this.issuerForm.get("creditTerm").value,receiver:this.receiverForm.get("uuid").value,payment_methods:[this.issuerForm.get("paymentMethod").value]};this._invoiceService.create(n).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:r=>{this.invoice.set(r),this.currentStep.set(s.LINES_DETAILS),this.disableNext.set(!0),this.disablePrev.set(!1)}})}}addLines(){this.bills.forEach(t=>{const n={code:t.code,commercial_unit_measurement:t?.commercial_unit_measurement,detail:t?.detail,line_total_amount:t?.line_total_amount,quantity:t?.quantity,subtotal:t?.subtotal,unit_price:t?.unit_price,tariff_entry:t?.tariff_entry,tax_base:t?.tax_base,tax_net:t?.tax_net?.toString(),total_amount:t?.total_amount,unit_measurement:t?.unit_measurement?.uuid,discounts:t?.discounts.map(r=>({amount:r?.amount,nature:r?.nature})),taxes:t?.taxes.map(r=>{const l=[];return"01"===r?.code&&l.push({amount:t?.exoneration?.amount?.toString(),type:t?.exoneration?.tipoDocumento?.codigo,percentage:t?.exoneration?.porcentajeExoneracion,date_issue:t?.exoneration?.fechaEmision,name_institution:t?.exoneration?.nombreInstitucion,number:t?.exoneration?.numeroDocumento}),{amount:r?.amount,code:r?.code,exonerations:l}})};this._invoiceService.addLine(this.invoice()?.uuid,n).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:r=>{this.invoice.set(r),this.currentStep.set(s.OTHER_CHARGES),this.disableNext.set(!0),this.disablePrev.set(!1)},error:()=>{this._toastService.showToast(this._translateService.instant((0,v.J)("Ha ocurrido un error al guardar la linea de detalle con el siguiente c\xf3digo: "))+t?.code,C.p.DANGER)}})})}addCharges(){this.otherCharges.forEach(t=>{const n={type:t?.type,detail:t?.detail,amount:t?.amount.toString(),name:t?.name,identity_number:t?.identity_number,percentage:t?.percentage.toString()};this._invoiceService.addCharge(this.invoice()?.uuid,n).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:r=>{this.invoice.set(r),this.currentStep.set(s.BILL_NOTES),this.disableNext.set(!1),this.disablePrev.set(!1)},error:()=>{this._toastService.showToast(this._translateService.instant((0,v.J)("Ha ocurrido un error al guardar el cargo: "))+n?.name,C.p.DANGER)}})})}checkStepperStates(){switch(this.currentStep()){case s.ISSUER:this.issuerForm.valid&&(this.currentStep.set(s.RECEIVER),this.disableNext.set(!0),this.disablePrev.set(!1));break;case s.RECEIVER:this.receiverForm.valid&&this.createDocument();break;case s.LINES_DETAILS:this.addLines();break;case s.OTHER_CHARGES:this.addCharges();break;case s.BILL_NOTES:this.currentStep.set(s.FILE_UPLOAD),this.disableNext.set(!1),this.disablePrev.set(!1);break;case s.FILE_UPLOAD:this.currentStep.set(s.SUMMARY),this.disableNext.set(!1),this.disablePrev.set(!1);break;default:this.disableNext.set(!0),this.disablePrev.set(!0)}}previousStep(){switch(this.currentStep()){case s.RECEIVER:this.currentStep.set(s.ISSUER),this.issuerForm.valid&&this.disableNext.set(!1);break;case s.LINES_DETAILS:this.currentStep.set(s.RECEIVER),this.receiverForm.valid&&this.disableNext.set(!1);break;case s.OTHER_CHARGES:this.currentStep.set(s.LINES_DETAILS),this.bills.length&&this.disableNext.set(!1);break;case s.BILL_NOTES:this.currentStep.set(s.OTHER_CHARGES),this.disableNext.set(!1);break;case s.FILE_UPLOAD:this.currentStep.set(s.BILL_NOTES),this.disableNext.set(!1);break;case s.SUMMARY:this.currentStep.set(s.FILE_UPLOAD),this.disableNext.set(!1);break;default:this.disableNext.set(!0),this.disablePrev.set(!0)}}nextStep(){this.checkStepperStates()}issuerChanged(t){this.issuerForm.patchValue({...t}),this.currentStep()===s.ISSUER&&this.issuerForm.valid&&this.disableNext.set(!1)}receiverChanged(t){this.receiverForm.patchValue({...t}),this.currentStep()===s.RECEIVER&&this.receiverForm.valid&&this.disableNext.set(!1)}getBills(t){this.bills=t,this.currentStep()===s.LINES_DETAILS&&this.bills.length&&this.disableNext.set(!1)}getCharges(t){this.otherCharges=t,this.currentStep()===s.OTHER_CHARGES&&this.disableNext.set(!1)}onFileUploaded(t){this.file=t,this.currentStep()===s.FILE_UPLOAD&&this.disableNext.set(!1)}complete(){this._invoiceService.create().pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{const t=this._modal.open(ie.c,{size:"sm"});t.componentInstance.question=(0,v.J)("\xbfDesea emitir la factura?"),t.result.then(n=>{"accept"===n&&this._invoiceService.emit({}).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:()=>{this._toastService.showToast((0,v.J)("Factura emitida con \xe9xito"),C.p.SUCCESS)},error:()=>{this._toastService.showToast((0,v.J)("Ha ocurrido un error al emitir la factura"),C.p.DANGER)}})})},error:()=>{this._toastService.showToast((0,v.J)("Ha ocurrido un error al guardar la factura"),C.p.DANGER)}})}ngOnInit(){this.steps.set([{id:s.ISSUER,title:(0,v.J)("Emisor"),body:this.issuer,icon:_.Z5q},{id:s.RECEIVER,title:(0,v.J)("Cliente"),body:this.receiver,icon:_.YHc},{id:s.LINES_DETAILS,title:(0,v.J)("Lineas"),body:this.lines,icon:_.owJ},{id:s.OTHER_CHARGES,title:(0,v.J)("Cargos"),body:this.charges,icon:_.LH4},{id:s.BILL_NOTES,title:(0,v.J)("Notas"),body:this.notes,icon:_.Ykk},{id:s.FILE_UPLOAD,title:(0,v.J)("Adjuntos"),body:this.attach,icon:_.Alc},{id:s.SUMMARY,title:(0,v.J)("Resumen"),body:this.check,icon:_.jMV}]),this.notesSubscription(),this._activatedRoute.params.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{t?.id&&(this.editMode=!0,this._invoiceService.get(t?.id).pipe((0,d.R)(this.observableDestroy$)).subscribe({next:n=>{this.invoice.set(n),this.updateForEdit()}}))}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Q.q),e.Y36(C.k),e.Y36(p.sK),e.Y36(J.gz),e.Y36(b.FF))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-invoice"]],viewQuery:function(t,n){if(1&t&&(e.Gf(wo,7),e.Gf(Io,7),e.Gf(Jo,7),e.Gf(No,7),e.Gf(Eo,7),e.Gf(ko,7),e.Gf(Uo,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.issuer=r.first),e.iGM(r=e.CRH())&&(n.receiver=r.first),e.iGM(r=e.CRH())&&(n.lines=r.first),e.iGM(r=e.CRH())&&(n.charges=r.first),e.iGM(r=e.CRH())&&(n.notes=r.first),e.iGM(r=e.CRH())&&(n.attach=r.first),e.iGM(r=e.CRH())&&(n.check=r.first)}},features:[e.qOj],decls:16,vars:4,consts:[[1,"d-flex","flex-column","gap-3"],[3,"steps","currentStep","disableNext","disablePrev","prev","next","finalize"],["issuer",""],["receiver",""],["lines",""],["charges",""],["notes",""],["attach",""],["check",""],[3,"ngModel","ngModelChange"],[3,"bills"],[3,"otherCharges"],[1,"d-flex","justify-content-between","align-items-stretch","gap-3","p-4","invoice-data-group",3,"formGroup"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["cols","8","formControlName","notas",1,"form-control","no-resize","h-100"],[1,"p-4","invoice-data-group"],[3,"fileUploaded"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-stepper",1),e.NdJ("prev",function(){return n.previousStep()})("next",function(){return n.nextStep()})("finalize",function(){return n.complete()}),e.qZA()(),e.YNc(2,Do,1,1,"ng-template",null,2,e.W1O),e.YNc(4,So,1,1,"ng-template",null,3,e.W1O),e.YNc(6,Qo,1,0,"ng-template",null,4,e.W1O),e.YNc(8,jo,1,0,"ng-template",null,5,e.W1O),e.YNc(10,Yo,7,6,"ng-template",null,6,e.W1O),e.YNc(12,zo,2,0,"ng-template",null,7,e.W1O),e.YNc(14,Ro,0,0,"ng-template",null,8,e.W1O)),2&t&&(e.xp6(1),e.Q6J("steps",n.steps())("currentStep",n.currentStep())("disableNext",n.disableNext())("disablePrev",n.disablePrev()))},dependencies:[S,z,a.Fj,a.JJ,a.JL,a.sg,a.u,a.On,B,$,H,W.Y,c.rS,p.X$],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.invoice-data-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 0 4px 1px #6161614d;-moz-box-shadow:0 0 4px 1px rgba(97,97,97,.3);-webkit-box-shadow:0 0 4px 1px rgba(97,97,97,.3)}"],changeDetection:0}),o})()}];let Bo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[J.Bz.forChild(Vo),J.Bz]}),o})(),Xo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})(),Go=(()=>{class o{constructor(t){this.el=t,this.regex=new RegExp(/^[0-9]+(\.[0-9]*){0,1}$/g),this.specialKeys=["Backspace","Tab","End","Home","-",".","ArrowLeft","ArrowRight"]}onKeyDown(t){if(-1!==this.specialKeys.indexOf(t.key))return;const r=this.el.nativeElement.value.concat(t.key);r&&!String(r).match(this.regex)&&t.preventDefault()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq))},o.\u0275dir=e.lG2({type:o,selectors:[["","appDecimalOnly",""]],hostBindings:function(t,n){1&t&&e.NdJ("keydown",function(l){return n.onKeyDown(l)})}}),o})(),$o=(()=>{class o extends T.u{constructor(){super(),this.faDollarSign=_.egO,this.form=new a.nJ({value:new a.p4({value:"0.00000",disabled:!1})}),this.onChange=()=>{},this.onTouched=()=>{}}reactToValueChanges(){this.form.valueChanges.pipe((0,d.R)(this.observableDestroy$)).subscribe({next:t=>{this.onChange(t?.value),this.onTouched()}})}writeValue(t){t&&(this.form.patchValue({value:t}),this.reactToValueChanges())}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.form.disable():this.form.enable()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-input-dollar-field"]],inputs:{label:"label"},standalone:!0,features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.qOj,e.jDz],decls:11,vars:7,consts:[[1,"d-flex","justify-content-between","align-items-center","gap-3",3,"formGroup"],[1,"w-50","text-end"],[1,"input-group","w-50","flex-nowrap"],[1,"input-group-addon"],[1,"input-group-prepend"],[1,"input-group-text"],[3,"icon"],["type","text","formControlName","value","appDecimalOnly","",1,"w-100","text-end","form-control"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2),e.ALo(3,"capitalize"),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"span",5),e._UZ(9,"fa-icon",6),e.qZA()()(),e._UZ(10,"input",7),e.qZA()()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(2),e.hij("",e.lcZ(3,3,e.lcZ(4,5,n.label)),":"),e.xp6(7),e.Q6J("icon",n.faDollarSign))},dependencies:[m.uH,m.BN,p.aw,p.X$,x.P,Z.e,a.UX,a.Fj,a.JJ,a.JL,a.sg,a.u,Xo,Go],changeDetection:0}),o})(),Ho=(()=>{class o extends T.u{constructor(){super(),this.notesForm=new a.nJ({notas:new a.p4({value:null,disabled:!1}),total_services_taxed:new a.p4({value:"0.00000",disabled:!1}),total_exempt_services:new a.p4({value:"0.00000",disabled:!1}),total_exonerated_service:new a.p4({value:"0.00000",disabled:!1}),total_merchandise_taxed:new a.p4({value:"0.00000",disabled:!1}),total_exempt_merchandise:new a.p4({value:"0.00000",disabled:!1}),total_exonerated_merchandise:new a.p4({value:"0.00000",disabled:!1}),total_taxed:new a.p4({value:"0.00000",disabled:!1}),total_exempt:new a.p4({value:"0.00000",disabled:!1}),total_exonerated:new a.p4({value:"0.00000",disabled:!1}),total_sale:new a.p4({value:"0.00000",disabled:!1}),total_discount:new a.p4({value:"0.00000",disabled:!1}),total_net_sale:new a.p4({value:"0.00000",disabled:!1}),total_tax:new a.p4({value:"0.00000",disabled:!1}),total_vat_returned:new a.p4({value:"0.00000",disabled:!1}),total_other_charges:new a.p4({value:"0.00000",disabled:!1}),total:new a.p4({value:"0.00000",disabled:!1})}),this.onChange=()=>{},this.onTouched=()=>{}}reactToValueChanges(){this.notesForm.valueChanges.pipe((0,E.x)((t,n)=>JSON.stringify(t)===JSON.stringify(n)),(0,d.R)(this.observableDestroy$),(0,k.b)(100)).subscribe({next:t=>{this.onChange({...t}),this.onTouched()}})}writeValue(t){this.notesForm.patchValue({...t})}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}ngOnInit(){this.reactToValueChanges()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-bill-notes"]],standalone:!0,features:[e._Bn([{provide:a.JU,useExisting:(0,e.Gpc)(()=>o),multi:!0}]),e.qOj,e.jDz],decls:25,vars:22,consts:[[1,"d-flex","justify-content-between","align-items-stretch","gap-3","p-4","invoice-data-group",3,"formGroup"],[1,"d-flex","flex-column","form-group","w-100"],[1,"control-label","mb-2"],["cols","8","formControlName","notas",1,"form-control","no-resize","h-100"],[1,"d-flex","flex-column","justify-content-start","align-items-stretch","gap-1","w-100"],["formControlName","total_services_taxed",3,"label"],["formControlName","total_exempt_services",3,"label"],["formControlName","total_exonerated_service",3,"label"],["formControlName","total_merchandise_taxed",3,"label"],["formControlName","total_exempt_merchandise",3,"label"],["formControlName","total_exonerated_merchandise",3,"label"],["formControlName","total_taxed",3,"label"],["formControlName","total_exempt",3,"label"],["formControlName","total_exonerated",3,"label"],["formControlName","total_sale",3,"label"],["formControlName","total_discount",3,"label"],["formControlName","total_net_sale",3,"label"],["formControlName","total_tax",3,"label"],["formControlName","total_vat_returned",3,"label"],["formControlName","total_other_charges",3,"label"],["formControlName","total",3,"label"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"label",2),e._uU(3),e.ALo(4,"titlecase"),e.ALo(5,"translate"),e.qZA(),e._UZ(6,"textarea",3),e.qZA(),e.TgZ(7,"div",4),e._UZ(8,"app-input-dollar-field",5)(9,"app-input-dollar-field",6)(10,"app-input-dollar-field",7)(11,"app-input-dollar-field",8)(12,"app-input-dollar-field",9)(13,"app-input-dollar-field",10)(14,"app-input-dollar-field",11)(15,"app-input-dollar-field",12)(16,"app-input-dollar-field",13),e.qZA(),e.TgZ(17,"div",4),e._UZ(18,"app-input-dollar-field",14)(19,"app-input-dollar-field",15)(20,"app-input-dollar-field",16)(21,"app-input-dollar-field",17)(22,"app-input-dollar-field",18)(23,"app-input-dollar-field",19)(24,"app-input-dollar-field",20),e.qZA()()),2&t&&(e.Q6J("formGroup",n.notesForm),e.xp6(3),e.hij(" ",e.lcZ(4,18,e.lcZ(5,20,"notas")),": "),e.xp6(5),e.Q6J("label","total serv. gravados"),e.xp6(1),e.Q6J("label","total serv. exentos"),e.xp6(1),e.Q6J("label","total serv. exonerado"),e.xp6(1),e.Q6J("label","total merc. gravadas"),e.xp6(1),e.Q6J("label","total merc. exentas"),e.xp6(1),e.Q6J("label","total merc. exonerada"),e.xp6(1),e.Q6J("label","total gravado"),e.xp6(1),e.Q6J("label","total exento"),e.xp6(1),e.Q6J("label","total exonerado"),e.xp6(2),e.Q6J("label","total venta"),e.xp6(1),e.Q6J("label","total descuentos"),e.xp6(1),e.Q6J("label","total venta neta"),e.xp6(1),e.Q6J("label","total impuesto"),e.xp6(1),e.Q6J("label","total IVA devuelto"),e.xp6(1),e.Q6J("label","total otros cargos"),e.xp6(1),e.Q6J("label","total comprobante"))},dependencies:[m.uH,$o,p.aw,p.X$,c.rS,a.UX,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:[".alert-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#c9effb;border-color:#b6e9fa}.alert-atlas-theme[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border-top-color:#9ee2f8}.alert-atlas-theme[_ngcontent-%COMP%]   .alert-link[_ngcontent-%COMP%]{color:#043646}.badge-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9}.badge-atlas-theme[href][_ngcontent-%COMP%]:hover, .badge-atlas-theme[href][_ngcontent-%COMP%]:focus{color:#212529;background-color:#0c8fb9}.bg-atlas-theme[_ngcontent-%COMP%]{background-color:#10b4e9!important}a.bg-atlas-theme[_ngcontent-%COMP%]:hover, a.bg-atlas-theme[_ngcontent-%COMP%]:focus, button.bg-atlas-theme[_ngcontent-%COMP%]:hover, button.bg-atlas-theme[_ngcontent-%COMP%]:focus{background-color:#0c8fb9!important}.border-atlas-theme[_ngcontent-%COMP%]{border-color:#10b4e9!important}.btn-atlas-theme[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#0d9ac7;border-color:#0c8fb9}.btn-atlas-theme[_ngcontent-%COMP%]:focus, .btn-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-atlas-theme.disabled[_ngcontent-%COMP%], .btn-atlas-theme[_ngcontent-%COMP%]:disabled{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#0c8fb9;border-color:#0b84aa}.btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9;background-color:transparent;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:hover{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:focus, .btn-outline-atlas-theme.focus[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem #10b4e980}.btn-outline-atlas-theme.disabled[_ngcontent-%COMP%], .btn-outline-atlas-theme[_ngcontent-%COMP%]:disabled{color:#10b4e9;background-color:transparent}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]{color:#212529;background-color:#10b4e9;border-color:#10b4e9}.btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled):active:focus, .btn-outline-atlas-theme[_ngcontent-%COMP%]:not(:disabled):not(.disabled).active:focus, .show[_ngcontent-%COMP%] > .btn-outline-atlas-theme.dropdown-toggle[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .2rem #10b4e980}.list-group-item-atlas-theme[_ngcontent-%COMP%]{color:#085b76;background-color:#b6e9fa}.list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:hover, .list-group-item-atlas-theme.list-group-item-action[_ngcontent-%COMP%]:focus{color:#085b76;background-color:#9ee2f8}.list-group-item-atlas-theme.list-group-item-action.active[_ngcontent-%COMP%]{color:#212529;background-color:#085b76;border-color:#085b76}.table-atlas-theme[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > th[_ngcontent-%COMP%], .table-atlas-theme[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{background-color:#b6e9fa}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover{background-color:#9ee2f8}.table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > td[_ngcontent-%COMP%], .table-hover[_ngcontent-%COMP%]   .table-atlas-theme[_ngcontent-%COMP%]:hover > th[_ngcontent-%COMP%]{background-color:#9ee2f8}.text-atlas-theme[_ngcontent-%COMP%]{color:#10b4e9!important}a.text-atlas-theme[_ngcontent-%COMP%]:hover, a.text-atlas-theme[_ngcontent-%COMP%]:focus{color:#0c8fb9!important}.invoice-data-group[_ngcontent-%COMP%]{border-radius:4px;box-shadow:0 0 4px 1px #6161614d;-moz-box-shadow:0 0 4px 1px rgba(97,97,97,.3);-webkit-box-shadow:0 0 4px 1px rgba(97,97,97,.3)}"],changeDetection:0}),o})(),Wo=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[Q.q],imports:[c.ez,Bo,S,z,a.UX,a.u5,B,$,H,Ho,W.Y,p.aw]}),o})()}}]);